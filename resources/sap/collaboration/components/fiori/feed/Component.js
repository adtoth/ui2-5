/*!
 * @copyright@
 */
jQuery.sap.require("sap.collaboration.library");jQuery.sap.require("sap.collaboration.components.utils.CommonUtil");jQuery.sap.require("sap.collaboration.components.utils.JamUtil");jQuery.sap.require("sap.collaboration.components.utils.OdataUtil");jQuery.sap.require("sap.ui.core.UIComponent");jQuery.sap.declare("sap.collaboration.components.fiori.feed.Component");sap.ui.core.UIComponent.extend("sap.collaboration.components.fiori.feed.Component",{metadata:{properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:""},height:{type:"sap.ui.core.CSSSize",defaultValue:""},oDataServiceUrl:{type:"sap.ui.core.URI",defaultValue:"/sap/opu/odata/sap/SM_INTEGRATION_SRV"},feedType:{type:"string"},groupIds:{type:"string"},object:{type:"object"}},aggregations:{},events:{}},init:function(){this.CollaborationFeedConstants={defaultWidth:'100%',defaultHeight:'100%'};this.setWidth(this.CollaborationFeedConstants.defaultWidth);this.setHeight(this.CollaborationFeedConstants.defaultHeight);this.mode=sap.collaboration.AppType.widget;this.oCommonUtil=new sap.collaboration.components.utils.CommonUtil();this.oLangBundle=this.oCommonUtil.getLanguageBundle();sap.ui.core.UIComponent.prototype.init.apply(this)},setSettings:function(s){this.setODataServiceUrl(s.oDataServiceUrl);this.setFeedType(s.feedType);this.setGroupIds(s.groupIds);this.setObject(s.object)},onBeforeRendering:function(){var a=true;this.sODataServiceUrl=this.getODataServiceUrl();this.oOdataModel=new sap.ui.model.odata.ODataModel(this.sODataServiceUrl,a);if(sap.ui.getCore().byId(this.getId()+"_oAppView")){sap.ui.getCore().byId(this.getId()+"_oAppView").destroy()}if(sap.ui.getCore().byId(this.getId()+"_oSplitAppView")){sap.ui.getCore().byId(this.getId()+"_oSplitAppView").destroy()}},onAfterRendering:function(){jQuery.sap.log.debug("Feed Component properties:","","sap.collaboration.components.fiori.feed.Component.onAfterRendering()");jQuery.sap.log.debug("width: "+this.getWidth());jQuery.sap.log.debug("height: "+this.getHeight());jQuery.sap.log.debug("oDataServiceUrl: "+this.getODataServiceUrl());jQuery.sap.log.debug("feedType: "+this.getFeedType());jQuery.sap.log.debug("groupIds: "+this.getGroupIds());jQuery.sap.log.debug("object: "+JSON.stringify(this.getObject()));if(this.getMode()===sap.collaboration.AppType.widget){var a=sap.ui.view({id:this.getId()+"_oAppView",viewData:{controlId:this.getId(),odataModel:this.oOdataModel,appType:this.getMode(),feedType:this.getFeedType(),groupIds:this.getGroupIds(),object:this.getObject(),langBundle:this.oLangBundle},type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.collaboration.components.fiori.feed.app.App"});a.placeAt(this.getId())}else if(this.getMode()===sap.collaboration.AppType.split){var s=sap.ui.view({id:this.getId()+"_oSplitAppView",viewData:{controlId:this.getId(),odataModel:this.oOdataModel,appType:this.getMode(),object:this.getObject(),langBundle:this.oLangBundle},type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.collaboration.components.fiori.feed.splitApp.SplitApp"});s.placeAt(this.getId())}},render:function(r){r.write("<div id='"+this.getId()+"' style='width:"+this.getWidth()+";height:"+this.getHeight()+"'");r.write(">");r.write("</div>")},getMode:function(){return this.mode}});
