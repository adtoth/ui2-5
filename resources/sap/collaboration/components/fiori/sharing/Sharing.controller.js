/*!
 * @copyright@
 */
sap.ui.controller("sap.collaboration.components.fiori.sharing.Sharing",{onInit:function(){this.sPrefixId=this.getView().getViewData().controlId;this.oLangBundle=this.getView().getViewData().langBundle;this.aJamGroups=this.getView().getViewData().jamGroups;this.sObjectShare=this.getView().getViewData().objectShare;this.oObjectDisplay=this.getView().getViewData().objectDisplay},onBeforeRendering:function(){if(this.aJamGroups.length!==0){this.addFormElement();this.processGroupsData();this.setViewModel();this.bindGroupSelect()}else{this.addNoGroupsMessage()}},onAfterRendering:function(){this.sSelectedGroupId=sap.ui.getCore().byId(this.sPrefixId+"_GroupSelect").getSelectedKey();if(this.sObjectShare){sap.ui.getCore().byId(this.sPrefixId+"_NoteTextArea").setValue(this.sObjectShare)}},addFormElement:function(){this.getView().oSharingVBox.removeAllItems();if(this.oObjectDisplay){this.getView().oSharingVBox.addItem(this.oObjectDisplay)}this.getView().oSharingVBox.addItem(this.getView().oGroupSelectionLayout);this.getView().oSharingVBox.addItem(this.getView().oNoteLayout)},addNoGroupsMessage:function(){this.getView().oSharingVBox.removeAllItems();this.getView().oSharingVBox.addItem(this.getView().oNoDataLayout)},processGroupsData:function(){for(var i=0;i<this.aJamGroups.length;i++){this.aJamGroups[i].Name=this.aJamGroups[i].Name+" ("+this.aJamGroups[i].GroupType+")"}},setViewModel:function(){this.oViewData={jamGroups:this.aJamGroups};this.oViewModel=new sap.ui.model.json.JSONModel(this.oViewData);this.getView().setModel(this.oViewModel)},bindGroupSelect:function(){var i=new sap.ui.core.Item({key:"{Id}",text:"{Name}"});sap.ui.getCore().byId(this.sPrefixId+"_GroupSelect").bindItems("/jamGroups",i)},onGroupSelectChange:function(c){this.sSelectedGroupId=c.getParameter("selectedItem").getKey()},getSharingData:function(){var s={note:sap.ui.getCore().byId(this.sPrefixId+"_NoteTextArea").getValue(),groupId:this.sSelectedGroupId};return s}});
