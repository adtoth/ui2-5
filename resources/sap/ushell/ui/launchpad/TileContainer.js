/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{"scrollType":{type:"string",group:"Misc",defaultValue:'item'},"animationSpeed":{type:"int",group:"Misc",defaultValue:500},"groupId":{type:"string",group:"Misc",defaultValue:null},"showHeader":{type:"boolean",group:"Misc",defaultValue:true},"showPlaceholder":{type:"boolean",group:"Misc",defaultValue:true},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"headerText":{type:"string",group:"Misc",defaultValue:null},"headerLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H2},"groupHeaderLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H4},"showGroupHeader":{type:"boolean",group:"Misc",defaultValue:true},"visible":{type:"boolean",group:"Misc",defaultValue:true},"sortable":{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{"tiles":{type:"sap.ushell.ui.launchpad.Tile",multiple:true,singularName:"tile"},"footerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"}},events:{"afterRendering":{},"add":{}}}});sap.ushell.ui.launchpad.TileContainer.M_EVENTS={'afterRendering':'afterRendering','add':'add'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.ushell.override");sap.ushell.ui.launchpad.TileContainer.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.launchpad.PlusTile");this.oPlusTile=new sap.ushell.ui.launchpad.PlusTile({groupId:this.getGroupId(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this)};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy()}};sap.ushell.ui.launchpad.TileContainer.prototype.onAfterRendering=function(){this.fireAfterRendering()};sap.ushell.ui.launchpad.TileContainer.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.TileContainer.prototype.updateTiles=function(r){var n="tiles";if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments)}else{jQuery.sap.log.debug("Updating TileContainer. Reason: ",r);switch(r){case"filter":try{this.filterTiles()}catch(e){this.updateAggregation(n)}break;default:this.updateAggregation(n)}}};sap.ushell.ui.launchpad.TileContainer.prototype.filterTiles=function(){var n="tiles",b=this.mBindingInfos[n].binding,a=this.getMetadata().getJSONKeys()[n],N=null,g=b.isGrouped(),s=this.getShowGroupHeader(),G=null,l=-1,i=this[a._sGetter](),c=i.length,I=null,t=this;jQuery.each(b.getContexts(),function(d,C){var N,e;if(g&&b.aSorters.length>0){N=b.aSorters[0].fnGroup(C);e=(typeof N==="string")&&N||N.key||"";if(e!==G){for(I=i[++l];I&&(!I.getHeaderText||I.getHeaderText()!==e)&&l<c;I=i[++l]){I.setVisible(false)}I.setVisible(s)}G=e}for(I=i[++l];I&&I.getBindingContext().getPath()!==C.getPath()&&l<c;I=i[++l]){I.setVisible(false)}I.setVisible(true)});for(I=i[++l];I&&l<c;I=i[++l]){I.setVisible(false)}};sap.ushell.ui.launchpad.TileContainer.prototype.addTileGroup=function(g,h){this.addAggregation("tiles",h||new sap.ushell.ui.launchpad.HeaderTile({headerText:g.text||g.key,headerLevel:g.headerLevel||this.getGroupHeaderLevel(),visible:this.getShowGroupHeader()}).addStyleClass("sapUshellTileContainerHdr"))};sap.ushell.ui.launchpad.TileContainer.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v)}return this};sap.ushell.ui.launchpad.TileContainer.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this};sap.ushell.ui.launchpad.TileContainer.prototype.setSortable=function(s){if(s){this.$().find(".ui-sortable").sortable('enable')}else{this.$().find(".ui-sortable").sortable('disable')}return this}}());
