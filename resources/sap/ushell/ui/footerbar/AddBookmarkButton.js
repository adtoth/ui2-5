/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.m.Button");sap.m.Button.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"appData":{type:"object",group:"Misc",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.ui.layout.form.SimpleForm");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Input");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.ushell.resources");jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");sap.ushell.ui.footerbar.AddBookmarkButton.prototype.init=function(){this.setIcon('sap-icon://add-favorite');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("addToHomePageBtn"));var s=this;this.attachPress(function(){if(s.getBeforePressHandler()){s.getBeforePressHandler()()}this.showAddBookmarkDialog(function(){if(s.getAfterPressHandler()){s.getAfterPressHandler()()}})})};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.showAddBookmarkDialog=function(c){var r=sap.ushell.resources.i18n,b=sap.ushell.Container.getService("Bookmark"),a=this.getAppData()||{},d=new sap.m.Dialog({title:r.getText('addToHomePageBtn'),contentWidth:'300px',afterClose:function(){d.destroy()}}),t=new sap.m.Label({text:r.getText('titleFld')}),T=new sap.m.Input({value:a.title||''}),s=new sap.m.Label({text:r.getText('subtitleFld')}),S=new sap.m.Input({value:a.subtitle||''}),i=new sap.ui.core.Icon({src:a.icon||'sap-icon://home',size:'32px'}),I=new sap.m.Label({text:r.getText('infoMsg')}),o=new sap.m.Input({value:a.info||''}),e=new sap.ui.layout.form.SimpleForm({content:[i,t,T,s,S,I,o]}),f=new sap.m.Button({text:r.getText('okBtn'),press:function(){b.addBookmark({title:T.getValue(),subtitle:S.getValue(),url:location.hash||window.location.href,icon:a.icon,info:o.getValue(),numberUnit:a.numberUnit,serviceUrl:a.serviceUrl,serviceRefreshInterval:a.serviceRefreshInterval});d.close();c()}}),g=new sap.m.Button({text:r.getText('cancelBtn'),press:function(){d.close();c()}});d.setLeftButton(f);d.setRightButton(g);d.addContent(e);d.open()}}());
