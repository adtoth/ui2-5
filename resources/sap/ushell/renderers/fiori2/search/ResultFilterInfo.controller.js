// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.ResultFilterInfo",{onInit:function(){var m=new sap.ui.model.json.JSONModel();m.setData({filter:[]});this.getView().setModel(m,"filter");sap.ui.getCore().getEventBus().subscribe("search",this.searchInvoked,this);sap.ui.getCore().getEventBus().subscribe("searchDataSourceChange",this.dataSourceSelected,this)},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("search",this.searchInvoked,this);sap.ui.getCore().getEventBus().unsubscribe("searchDataSourceChange",this.dataSourceSelected,this)},dataSourceSelected:function(c,e,d){this.setResultFilterInfo([d])},searchInvoked:function(c,e,d){if(d.dataSource&&d.dataSource.label){this.setResultFilterInfo([d.dataSource])}else{this.setResultFilterInfo([])}},setResultFilterInfo:function(f){var m=this.getView().getModel("filter");if(f.length>0&&f[0].objectName&&(f[0].objectName==="$$ALL$$"||f[0].objectName.value==="$$ALL$$")){f.splice(0,1)}if(f.length>0){sap.ui.getCore().byId("searchResultPage").removeStyleClass("sapSearchResultFilterInfoHidden");this.showCategoryMarker=true;m.setProperty("/filter",f)}else{sap.ui.getCore().byId("searchResultPage").addStyleClass("sapSearchResultFilterInfoHidden");this.showCategoryMarker=false;m.setProperty("/filter",[])}},onBeforeRendering:function(){this.getView().getModel().setProperty("/states/searchResults/showCategoryMarker",this.showCategoryMarker)}})}());
