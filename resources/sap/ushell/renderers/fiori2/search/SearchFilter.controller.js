// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.SearchFilter",{onInit:function(){var s=sap.ui.getCore().byId("searchResultsView");this.getView().setModel(s.getModel(),'SearchFilter');var e=sap.ui.getCore().getEventBus();e.subscribe("search",this.buildCategoryTreeForSuggestion,this);e.subscribe("searchSuggest",this.buildCategoryTreeForNoSearchTerm,this);e.subscribe("closeCurtain",this.buildCategoryTreeForCloseCurtain,this)},selectCategory:function(e,c){sap.ushell.Container.getService("Search").setDataSource(c.dataSource,this.getView().getModel('SearchFilter'));sap.ui.getCore().getEventBus().publish("selectCategory",c.dataSource)},buildCategoryTreeForSuggestion:function(c,e,d){var s=this;s.getView().getModel("SearchFilter").setProperty("/currentState/showCurtainPane",false);if(d.categorySuggested){sap.ushell.Container.getService("Search").setSearchCategoryTree(d)}},buildCategoryTreeForNoSearchTerm:function(c,e,d){var s=this;if(d.searchTerm===""){sap.ushell.Container.getService("Search").setQueryForAll(this.getView().getModel('SearchFilter'),false)}else{sap.ushell.Container.getService("Search").setSearchTermWithoutQuery(d.searchTerm)}},buildCategoryTreeForCloseCurtain:function(){sap.ushell.Container.getService("Search").setQueryForAll(this.getView().getModel('SearchFilter'),true)}})}());
