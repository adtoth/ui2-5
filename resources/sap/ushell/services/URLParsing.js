// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLParsing");sap.ushell.services.URLParsing=function(){this.getShellHash=function(u){var r=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=r.exec(u);if(m){return m[1]}return undefined};this.getHash=function(u){var r=/[^#]#(.*)/,m=r.exec(u);if(m){return m[1]}return undefined};this.parseShellHash=function(h){var r=/([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?(([^&]|(&[^\/]))*)(&\/.*)?/,s,A,c,p,b,m,d,e,a;if(!h){return undefined}m=r.exec(h);if(m){s=m[1];A=m[2];c=m[4];p=m[5];b=m[8];d=p?jQuery.sap.getUriParameters(p).mParams:{};return{semanticObject:s,action:A,contextRaw:c,params:d,appSpecificRoute:b}}return undefined};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1)}return h};this.splitHash=function(h){var s,a;if(h===undefined||h===null||h===""){return{}}s=this.parseShellHash(h);if(!s){return{}}a=this.privstripLeadingHash(this.constructShellHash(s));return{shellPart:a,appSpecificRoute:(s&&s.appSpecificRoute)||undefined}};this.constructShellHash=function(s){var b,i=null,k,l=[],f="?",a=null;if(!s){return""}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw}if(s.target.shellHash){return this.privstripLeadingHash(s.target.shellHash)}b=s.target.semanticObject+"-"+s.target.action;if(s.target.contextRaw){b+="~"+s.target.contextRaw}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a)}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(s.params[a])){for(i=0;i<s.params[a].length;i=i+1){b+=f+a+"="+encodeURIComponent(s.params[a][i]);f="&"}}else{b+=f+a+"="+encodeURIComponent(s.params[a]);f="&"}}return b}};sap.ushell.services.URLParsing.hasNoAdapter=true}());
