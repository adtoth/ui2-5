
function phi4z(e,d,f,g,h,a,b,c,p){var s,j,t,m,k,l,n,o,q,i;p=a;for(i=1;i<=15;i++){s=Math.sin(p);t=Math.tan(p);c=t*Math.sqrt(1.0-e*s*s);j=Math.sin(2.0*p);m=d*p-f*j+g*Math.sin(4.0*p)-h*Math.sin(6.0*p);k=d-2.0*f*Math.cos(2.0*p)+4.0*g*Math.cos(4.0*p)-6.0*h*Math.cos(6.0*p);l=2.0*m+c*(m*m+b)-2.0*a*(c*m+1.0);n=e*j*(m*m+b-2.0*a*m)/(2.0*c);o=2.0*(a-m)*(c*k-2.0/j)-2.0*k;q=l/(n+o);p+=q;if(Math.abs(q)<=.0000000001)return(p)}Proj4js.reportError("phi4z: No convergence");return null}
function e4fn(x){var c,a;c=1.0+x;a=1.0-x;return(Math.sqrt((Math.pow(c,c))*(Math.pow(a,a))))}
Proj4js.Proj.poly={init:function(){var t;if(this.lat0==0)this.lat0=90;this.temp=this.b/this.a;this.es=1.0-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(p){var s,a;var b;var c;var d,m;var e;var x,y;var l=p.x;var f=p.y;d=Proj4js.common.adjust_lon(l-this.long0);if(Math.abs(f)<=.0000001){x=this.x0+this.a*d;y=this.y0-this.a*this.ml0}else{s=Math.sin(f);a=Math.cos(f);m=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,f);e=Proj4js.common.msfnz(this.e,s,a);d=s;x=this.x0+this.a*e*Math.sin(d)/s;y=this.y0+this.a*(m-this.ml0+e*(1.0-Math.cos(d))/s)}p.x=x;p.y=y;return p},inverse:function(p){var s,a;var d;var b;var c;var e,m;var i;var l,f;p.x-=this.x0;p.y-=this.y0;d=this.ml0+p.y/this.a;i=0;if(Math.abs(d)<=.0000001){l=p.x/this.a+this.long0;f=0.0}else{b=d*d+(p.x/this.a)*(p.x/this.a);i=phi4z(this.es,this.e0,this.e1,this.e2,this.e3,this.al,b,c,f);if(i!=1)return(i);l=Proj4js.common.adjust_lon((Proj4js.common.asinz(p.x*c/this.a)/Math.sin(f))+this.long0)}p.x=l;p.y=f;return p}};
