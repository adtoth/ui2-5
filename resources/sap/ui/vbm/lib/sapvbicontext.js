 VBI.VBIContext=
function(c){var v={};v.vbiclass="VBIContext";v.m_bLoaded=false;v.m_Resources=null;v.m_DataTypeProvider=null;v.m_DataProvider=null;v.m_SceneManager=null;v.m_MapProviders=null;v.m_MapLayerStackManager=null;v.m_Windows=null;v.m_Actions=null;v.m_Control=c;v.clear=function(){v.m_Control=null;v.m_Resources=null;v.m_DataTypeProvider=null;v.m_DataProvider=null;v.m_SceneManager=null;v.m_MapProviders=null;v.m_MapLayerStackManager=null;v.m_Windows=null;v.m_Actions=null};v.GetResources=function(){var r;if(r=v.m_Resources)return r;return(v.m_Resources=new VBI.Resources())};v.GetMainScene=function(){if(v.m_Windows){var w=null;if(w=v.m_Windows.GetMainWindow()){var s=null;if(s=w.GetScene())return s}}return null};v.FireAction=function(b,s,d,e,p){var i=null;if(jQuery.type(d)=='object')i=d.m_ID;else if(jQuery.type(d)=='string')i=d;var o={};var r=(o["SAPVB"]={});r["version"]="2.0";r["xmlns:VB"]="VB";var A=(r["Action"]={});A.name=b.m_name;A.object=i;A.id=b.m_id;if(e)A.instance=e.GetPath();var x=0.0;var y=0.0;if(p){A.Params={};A.Params.Param=[];for(var a in p){var t={};t["name"]=a;t["#"]=p[a];A.Params.Param.push(t);if(a=='x')x=p[a];if(a=='y')y=p[a]}}if(v.m_DataProvider)v.m_DataProvider.store(r);var l;if(b.m_additionalProperties&&(l=b.m_additionalProperties.length)){var f=A.AddActionProperties={};var g=f.AddActionProperty=[];for(var n=0;n<l;++n){var t,h;switch(b.m_additionalProperties[n]){case'zoom':g.push({name:'zoom','#':s.GetCurrentZoomlevel().toString()});break;case'centerpoint':h=s.GetCenterPos();g.push({name:'centerpoint','#':h[0].toString()+';'+h[1].toString()+';0.0'});break;case'pos':t=s.GetPosFromPoint([x,y,0]);h=VBI.MathLib.RadToDeg(t);g.push({name:'pos','#':h[0].toString()+';'+h[1].toString()+';0.0'});break;case'pitch':g.push({name:'pitch','#':'0.0'});break;case'yaw':g.push({name:'yaw','#':'0.0'});break}}}var j=JSON.stringify(r,null,'  ');if(v.m_Control)v.m_Control.fireSubmit({data:j})};v.onRenderLayer=function(a){v.m_Control.fireRender({canvas:a})};v.onMoveLayer=function(a){v.m_Control.fireMove({canvas:a})};v.onZoomLayer=function(a){v.m_Control.fireZoom({canvas:a})};return v}
;
