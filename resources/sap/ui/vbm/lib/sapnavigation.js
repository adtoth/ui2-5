VBI.NavigationControl=
function(S){var n={};n.scene=null;n.suppressedVisibility=S;n.m_MinLOD=null;n.m_MaxLOD=null;n.m_lengthScrollLine=94-18;n.m_startScrollPoint=null;n.m_ID=null;n.m_Div=n.m_Divmapnav=n.m_Divmapscrollarea=n.m_Divmapscrollpoint=n.m_Divmapcursorgrip=n.m_Divmapcursor=n.m_Divmapcursorreset=n.m_Divmapcursorleft=n.m_Divmapcursortop=n.m_Divmapcursorright=n.m_Divmapcursordown=null;n.clear=function(){n.scene=null;n.m_Div=n.m_Divmapnav=n.m_Divmapscrollarea=n.m_Divmapscrollpoint=n.m_Divmapcursorgrip=n.m_Divmapcursor=n.m_Divmapcursorreset=n.m_Divmapcursorleft=n.m_Divmapcursortop=n.m_Divmapcursorright=n.m_Divmapcursordown=null};n.getId=function(a,b){return b+'-'+a};n.AttachEvents=function(){var o=1.0;var t=50;var a;if(n.suppressedVisibility.fade){n.m_Divmapnav.style.opacity=1}else{jQuery(n.m_Divmapnav).on("mouseleave",function(){o=1.0;a=setInterval(function(){if(o<=0.5){clearInterval(a)}else{o-=0.01;n.m_Divmapnav.style.opacity=o}},t)});jQuery(n.m_Divmapnav).on("mouseenter",function(){clearInterval(a);n.m_Divmapnav.style.opacity=1})}if(!n.suppressedVisibility.zoom){if(n.suppressedVisibility.move)n.m_Divmapscrollarea.style.top=10;var s=0;n.m_Divmapscrollpoint.style.top=n.CalcScrollPointPos(n.m_lengthScrollLine,s);var m=[0,0];jQuery(n.m_Divmapscrollpoint).on("mousedown",function(){var e=n.scene.getCanvas();var w=n.scene.m_Div.getBoundingClientRect();var x=[w.width/2-e.getPixelLeft(),w.height/2-e.getPixelTop()];m=n.scene.GetGeoFromPoint(x)});jQuery(n.m_Divmapscrollpoint).on("mouseup",function(){m=[0,0]});var b=0;jQuery(n.m_Divmapscrollpoint).draggable({containment:"parent",axis:"y"},{drag:function(){var e=jQuery(n.m_Divmapscrollpoint).position().top;if(e!=b){var z=n.m_MinLOD+(((n.m_MaxLOD-n.m_MinLOD)*(e-s))/n.m_lengthScrollLine);n.scene.ZoomToZoomlevel(n.scene.getCanvas(),m,z)}b=e}})}if(!n.suppressedVisibility.move){var c;var d=20;var f=0;var g=0;var i=false;jQuery(n.m_Divmapnav).on("mouseleave",function(){i=false});jQuery(n.m_Divmapcursorgrip).on("mouseenter",function(){jQuery(n.m_Divmapcursor).css("background-position","-5px 228px")}).live("mouseleave",function(){jQuery(n.m_Divmapcursor).css("background-position","-5px 305px")});var h=10;jQuery(n.m_Divmapcursorleft).on("mousedown",function(){jQuery(this).css("background-position","-134px 194px");c=setInterval(function(){n.scene.MoveMap(h,0,false,false,false,false)},d)}).on("mouseup",function(){clearInterval(c);jQuery(this).css("background-position","-134px 211px")}).on("mouseout",function(){clearInterval(c);jQuery(this).css("background-position","-134px 228px")});jQuery(n.m_Divmapcursorright).on("mousedown",function(){jQuery(this).css("background-position","-116px 194px");c=setInterval(function(){n.scene.MoveMap(-h,0,false,false,false,false)},d)}).on("mouseup",function(){clearInterval(c);jQuery(this).css("background-position","-116px 211px")}).on("mouseout",function(){clearInterval(c);jQuery(this).css("background-position","-116px 228px")});jQuery(n.m_Divmapcursortop).on("mousedown",function(){jQuery(this).css("background-position","-82px 192px");c=setInterval(function(){n.scene.MoveMap(0,h,false,false,false,false)},d)}).on("mouseup",function(){clearInterval(c);jQuery(this).css("background-position","-82px 210px")}).on("mouseout",function(){clearInterval(c);jQuery(this).css("background-position","-82px 228px")});jQuery(n.m_Divmapcursordown).on("mousedown",function(){jQuery(this).css("background-position","-99px 192px");c=setInterval(function(){n.scene.MoveMap(0,-h,false,false,false,false)},d)}).on("mouseup",function(){clearInterval(c);jQuery(this).css("background-position","-99px 210px")}).on("mouseout",function(){clearInterval(c);jQuery(this).css("background-position","-99px 228px")});var j=21;var k=21;var l,p;jQuery(n.m_Divmapcursorreset).on("mousedown",function(e){jQuery(n.m_Divmapcursorleft).css("background-position","-134px 177px");jQuery(n.m_Divmapcursorright).css("background-position","-116px 177px");jQuery(n.m_Divmapcursordown).css("background-position","-99px 174px");jQuery(n.m_Divmapcursortop).css("background-position","-82px 174px");jQuery(this).css("background-position","-222px 263px");l=e.pageX-j;p=e.pageY-k;if(c){clearInterval(c);f=0;g=0}i=true}).on("mouseup",function(){n.StopAnimatedMove(c,f,g);i=false});var q=0;var r=0;var u,v;jQuery(n.m_Divmapcursorreset).draggable({containment:"parent",revert:true},{drag:function(e,w){if(c){clearInterval(c);f=0;g=0}if(i){var x=jQuery(n.m_Divmapcursorreset).position().left;var y=jQuery(n.m_Divmapcursorreset).position().top;var z=e.pageX-l;var A=e.pageY-p;var B=parseInt(Math.sqrt(Math.pow(z-j,2)+Math.pow(A-k,2)));var C=17;if(B>C){var D=Math.atan2(z-j,A-k);u=Math.ceil((k+(Math.cos(D)*C)));v=Math.ceil((j+(Math.sin(D)*C)));w.position.left=v;w.position.top=u;B=C}var E=B/C;var F=-(x-j)*E;var G=-(y-k)*E;c=setInterval(function(){n.scene.MoveMap(F,G,false,false,false,false)},d)}}});jQuery(n.m_Divmapcursorreset).css("position","");jQuery(n.m_Divmapcursorreset).bind('dragstop',function(){n.StopAnimatedMove(c,f,g)});jQuery(n.m_Divmapcursorreset).on("dblclick",function(){n.scene.GoToInitialStart()});jQuery(n.m_Divmapnav).on("mouseleave",function(){n.StopAnimatedMove(c,f,g)})}};n.AppendDiv=function(){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.vbm");var t=r.getText("NAVCTL_TITLE_MOVE_ARROWS");var T=r.getText("NAVCTL_TITLE_ZOOM",[0]);T=T.substr(0,T.search(/[0-9]/));n.m_Divmapnav=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-nav',n.m_ID),'viz-map-nav');n.m_Divmapcursor=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor',n.m_ID),'viz-map-cursor');n.m_Divmapscrollarea=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-scrollarea',n.m_ID),'viz-map-scrollarea');n.m_Divmapcursorgrip=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-grip',n.m_ID),'viz-map-cursor-grip');var m=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-middle',n.m_ID),'viz-map-cursor-middle');var a=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-scrolllineupperending',n.m_ID),'viz-map-scrolllineupperending');var b=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-scrollline',n.m_ID),'viz-map-scrollline');var c=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-scrolllinelowerending',n.m_ID),'viz-map-scrolllinelowerending');n.m_Divmapscrollpoint=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-scrollpoint',n.m_ID),'viz-map-scrollpoint',T);n.m_Divmapcursorleft=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-left',n.m_ID),'viz-map-cursor-left',t);n.m_Divmapcursorright=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-right',n.m_ID),'viz-map-cursor-right',t);n.m_Divmapcursortop=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-top',n.m_ID),'viz-map-cursor-top',t);n.m_Divmapcursordown=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-down',n.m_ID),'viz-map-cursor-down',t);n.m_Divmapcursorreset=VBI.Utilities.CreateGeoSceneDivCSS(n.getId('viz-map-cursor-reset',n.m_ID),'viz-map-cursor-reset',r.getText("NAVCTL_TITLE_MOVE"));m.appendChild(n.m_Divmapcursorleft);m.appendChild(n.m_Divmapcursorright);m.appendChild(n.m_Divmapcursortop);m.appendChild(n.m_Divmapcursordown);m.appendChild(n.m_Divmapcursorreset);n.m_Divmapcursorgrip.appendChild(m);n.m_Divmapscrollarea.appendChild(a);n.m_Divmapscrollarea.appendChild(b);n.m_Divmapscrollarea.appendChild(c);n.m_Divmapscrollarea.appendChild(n.m_Divmapscrollpoint);if(!n.suppressedVisibility.move){n.m_Divmapnav.appendChild(n.m_Divmapcursor);n.m_Divmapnav.appendChild(n.m_Divmapcursorgrip)}if(!n.suppressedVisibility.zoom){n.m_Divmapnav.appendChild(n.m_Divmapscrollarea)}n.scene.m_Div.appendChild(n.m_Divmapnav)};n.Awake=function(s,t){n.scene=s;n.m_MinLOD=n.scene.GetMinLOD();n.m_MaxLOD=n.scene.GetMaxLOD();var l=jQuery.sap.byId(t);n.m_ID=jQuery(l).attr('id');n.AppendDiv();n.AttachEvents();n.m_startScrollPoint=0};n.AdjustScrollPoint=function(l){if(l){var c=((n.m_lengthScrollLine*(l-n.m_MinLOD))/(n.m_MaxLOD-n.m_MinLOD))+n.m_startScrollPoint;jQuery(n.m_Divmapscrollpoint).css('top',c+'px')}else{var a=n.scene.GetCurrentZoomlevel();var c=((n.m_lengthScrollLine*(a-n.m_MinLOD))/(n.m_MaxLOD-n.m_MinLOD))+n.m_startScrollPoint;jQuery(n.m_Divmapscrollpoint).css('top',c+'px')}};n.CalcScrollPointPos=function(l,s){var c=n.scene.GetCurrentZoomlevel();var a=((l*(c-n.m_MinLOD))/(n.m_MaxLOD-n.m_MinLOD))+s;return a};n.StopAnimatedMove=function(t,d,a){if(t){clearInterval(t);d=0;a=0}jQuery(n.m_Divmapcursorleft).removeAttr("style");jQuery(n.m_Divmapcursorright).removeAttr("style");jQuery(n.m_Divmapcursordown).removeAttr("style");jQuery(n.m_Divmapcursortop).removeAttr("style");jQuery(n.m_Divmapcursorreset).removeAttr("style")};return n}
;
