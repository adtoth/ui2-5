sap.ui.controller("sap.ca.scfld.md.view.App",{onInit:function(){},onExit:function(){}});sap.ui.controller("sap.ca.scfld.md.view.MainSplitContainer",{onInit:function(){sap.ca.scfld.md.app.Application.getImpl().setSplitContainer(this.byId("MainSplitContainer"))}});jQuery.sap.declare('sap.ca.scfld.md.library-all');jQuery.sap.declare('sap.ca.scfld.md.view.App.controller');jQuery.sap.declare('sap.ca.scfld.md.view.MainSplitContainer.controller');if(!jQuery.sap.isDeclared('sap.ca.scfld.md.ApplicationFacade')){jQuery.sap.declare("sap.ca.scfld.md.ApplicationFacade");sap.ui.base.Object.extend("sap.ca.scfld.md.ApplicationFacade",{constructor:function(a){this.oApplicationImplementation=a},getResourceBundle:function(){return this.oApplicationImplementation.getResourceBundle()},getODataModel:function(n){return this.oApplicationImplementation.getODataModel(n)},isMock:function(){return this.oApplicationImplementation.isMock()}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.Startup')){jQuery.sap.declare("sap.ca.scfld.md.Startup");sap.ca.scfld.md.Startup={};sap.ca.scfld.md.Startup.init=function(i,m){var s=function(){var b=m.byId("fioriContent");if(b){jQuery.sap.require("sap.ca.scfld.md.app.Application");var a=new sap.ca.scfld.md.app.Application({identity:i,component:m.getView().getViewData().component,oViewHook:b.getId()});a.setIdentity(i);return true}return false};if(!s()){jQuery(s)}var S="<style> "+".sapMSplitAppFullscreen > .sapMSplitContainerMaster { position: fixed; height: 0; left: -10000px; width: 0; } "+".sapMSplitAppFullscreen > .sapMSplitContainerDetail .sapMSplitContainerMasterBtn { display: none; } "+"</style>";jQuery("head").append(S)}};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.ButtonListHelper')){jQuery.sap.declare("sap.ca.scfld.md.app.ButtonListHelper");jQuery.sap.require('sap.ca.ui.dialog.Dialog');sap.ui.base.Object.extend("sap.ca.scfld.md.app.ButtonListHelper",{constructor:function(a,m){this.oApplicationImplementation=a;this.iMode=m;if(this.iMode==20){this.oBar=new sap.m.Bar()}else if(this.iMode>=10){this.oActionSheet=new sap.m.ActionSheet();this.oActionSheet.setPlacement(sap.m.PlacementType.Top);this.oActionSheet.setShowCancelButton(true)}this.aButtons=[];this.startBuild();if(this.iMode==25){this.sDirection="Left"}else{this.sDirection="Right"}},addButtonListHelper:function(b){if(this.oChild){this.oChild.addButtonListHelper(b)}else{this.oChild=b}},startBuild:function(){this.mButtons={};this.aCallBacks=[];this.oPositions={iActive:0,iControlPosition:0};this.bHasOverflow=false;if(this.oChild){this.oChild.startBuild()}},endBuild:function(){for(var i=this.oPositions.iActive;i<this.aButtons.length;i++){var c=this.aButtons[i];if(c.oButton){c.oButton.setVisible(false)}if(c.oSelect){c.oButton.setVisible(false)}}if(this.oChild){this.oChild.endBuild()}this.bIsOverflowReplaced=false},destroy:function(){for(var i=0;i<this.aButtons.length;i++){var c=this.aButtons[i];if(c.oButton){c.oButton.destroy(true)}if(c.oSelect){c.oSelect.destroy(true)}}if(this.oBar){this.oBar.destroy()}if(this.oActionSheet){this.oActionSheet.destroy()}if(this.oChild){this.oChild.destroy()}},ensureButton:function(b,t,m){if(m&&this.oPositions.iActive>=m){if(!this.bHasOverflow){if(!this.oOverflowList){this.oOverflowList=new sap.ca.scfld.md.app.ButtonListHelper(this.oApplicationImplementation,10);this.addButtonListHelper(this.oOverflowList);this.oOverflowList.oBarList=this}this.iOverflowPosition=this.oPositions.iActive;this.ensureButton(sap.ca.scfld.md.app.ButtonListHelper.getOverflowMeta(this),"b");this.bHasOverflow=true}return this.oOverflowList.ensureButton(b,t)}else{var B=this.oPositions.iActive;if(B==this.aButtons.length){this.aButtons.push({})}}return this.ensureControlAtPosition(b,t,B,this.oPositions)},setBtnEnabled:function(i,e){var b=this.mButtons[i];if(b){b.setEnabled(e)}else if(this.oChild){this.oChild.setBtnEnabled(i,e)}},ensureControlAtPosition:function(b,t,B,p){var c=this.aButtons[B];if(t=="b"||this.iMode<20){if(c.oSelect){p.iControlPosition=this.oBar["indexOfContent"+this.sDirection](c.oSelect);c.oSelect.setVisible(false)}if(c.oButton){c.oButton.setVisible(true);if(this.oBar){var C=this.oBar["indexOfContent"+this.sDirection](c.oButton);if(C>p.iControlPosition){p.iControlPosition=C}}}else{c.oButton=new sap.m.Button();c.oButton.attachPress(jQuery.proxy(function(e){if(this.aCallBacks[B]){this.aCallBacks[B](e)}},this));p.iControlPosition++;if(this.iMode>=20){this.oBar["insertContent"+this.sDirection](c.oButton,p.iControlPosition)}else if(this.iMode>=10){this.oActionSheet.addButton(c.oButton)}else if(this.iMode==5){this.oBar.insertContentLeft(c.oButton,p.iControlPosition)}}if(b.sI18nBtnTxt){var o=this.oApplicationImplementation.AppI18nModel.getResourceBundle();var T=o.getText(b.sI18nBtnTxt)}else{var T=b.sBtnTxt}if(this.iMode<20||!b.sIcon){if(T!=c.oButton.getText()){c.oButton.setText(T)}}if(this.iMode==20){if(c.oButton.getType()!=b.style){c.oButton.setType(b.style)}}if(t=="b"){this.aCallBacks[B]=b.onBtnPressed}else{this.aCallBacks[B]=this.getSelectReplacement(b)}var r=c.oButton}else{if(c.oButton){p.iControlPosition=this.oBar["indexOfContent"+this.sDirection](c.oButton);c.oButton.setVisible(false)}if(c.oSelect){c.oSelect.setVisible(true);var C=this.oBar["indexOfContent"+this.sDirection](c.oSelect);if(C>p.iControlPosition){p.iControlPosition=C}c.oSelect.destroyItems()}else{c.oSelect=new sap.m.Select();c.oSelect.setType(sap.m.SelectType.IconOnly);c.oSelect.setAutoAdjustWidth(true);p.iControlPosition++;this.oBar["insertContent"+this.sDirection](c.oSelect,p.iControlPosition);c.oSelect.attachChange(jQuery.proxy(function(e){var k=e.getSource().getSelectedKey();if(this.aCallBacks[B]){this.aCallBacks[B](k)}},this))}if(b.sSelectedItemKey){c.oSelect.setSelectedItem(b.sSelectedItemKey)}for(var i=0;i<b.aItems.length;i++){var s=b.aItems[i];var I=new sap.ui.core.Item(s);c.oSelect.addItem(I)}if(b.sSelectedItemKey){c.oSelect.setSelectedKey(b.sSelectedItemKey)}this.aCallBacks[B]=b.onChange;r=c.oSelect}if(b.sIcon!=r.getIcon()){r.setIcon(b.sIcon)}if(b.sId){this.mButtons[b.sId]=r}r.setEnabled(!b.bDisabled);p.iActive++;return r},getSelectReplacement:function(b){var s=b.sSelectedItemKey;var c=function(r){if(r.selectedIndex>=0){var S=b.aItems[r.selectedIndex].key;if(S!=s){s=S;b.onChange(s)}}};return function(e){var I=[];var S=0;for(var i=0;i<b.aItems.length;i++){I.push({itemContent:b.aItems[i].text});if(b.aItems[i].key==s){S=i}}s=b.aItems[S].key;sap.ca.ui.dialog.selectItem.open({title:e.getSource().getText(),items:I,defaultIndex:S},c)}},revertOverflowReplacement:function(){if(this.bIsOverflowReplaced){this.ensureControlAtPosition(sap.ca.scfld.md.app.ButtonListHelper.getOverflowMeta(this),"b",this.iOverflowPosition,{});this.bIsOverflowReplaced=false}},setBtnText:function(i,t){var b=this.mButtons[i];if(b){b.setText(t)}else if(this.oChild){this.oChild.setText(i,t)}}});sap.ca.scfld.md.app.ButtonListHelper.getOverflowMeta=function(o){return{sIcon:"sap-icon://overflow",onBtnPressed:function(e){o.oOverflowList.oActionSheet.openBy(e.getSource())}}}};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.CommonHeaderFooterHelper')){jQuery.sap.declare("sap.ca.scfld.md.app.CommonHeaderFooterHelper");jQuery.sap.require('sap.ushell.ui.footerbar.JamShareButton');jQuery.sap.require('sap.ushell.ui.footerbar.JamDiscussButton');jQuery.sap.require('sap.ushell.ui.footerbar.AddBookmarkButton');jQuery.sap.require('sap.ushell.services.AppConfiguration');if(!sap.ushell.services.AppConfiguration.getSettingsControl){sap.ushell.services.AppConfiguration.getSettingsControl=function(){return new sap.m.Button({icon:"sap-icon://accidental-leave"})}}sap.ui.base.Object.extend("sap.ca.scfld.md.app.CommonHeaderFooterHelper",{constructor:function(a,d){this.oAppImp=a;this.detailHeaderFooterRules=d},startBuild:function(c,o,s){c._oHeaderFooterOptions=o;var p=c.getView().getContent()[0];if(c._oControlStore){c._oControlStore.oButtonListHelper.startBuild()}else{c._oControlStore={};if(s){jQuery.extend(c._oControlStore,s)}c._oControlStore.oButtonListHelper=new sap.ca.scfld.md.app.ButtonListHelper(this.oAppImp,20);this.oAppImp.registerExitModule(function(){c._oControlStore.oButtonListHelper.destroy()});p.setFooter(c._oControlStore.oButtonListHelper.oBar)}return p},endBuild:function(c){c._oControlStore.oButtonListHelper.endBuild()},defineFooterRight:function(c,p,f,I,b){var h=false;if(c._oHeaderFooterOptions.oEditBtn){var B={};jQuery.extend(B,c._oHeaderFooterOptions.oEditBtn);B.style=sap.m.ButtonType.Emphasized;c._oControlStore.oButtonListHelper.ensureButton(B,"b",f);h=true}else{if(c._oHeaderFooterOptions.oPositiveAction){var B={};jQuery.extend(B,c._oHeaderFooterOptions.oPositiveAction);B.style=sap.m.ButtonType.Accept;c._oControlStore.oButtonListHelper.ensureButton(B,"b",f);h=true}if(c._oHeaderFooterOptions.oNegativeAction){var B={};jQuery.extend(B,c._oHeaderFooterOptions.oNegativeAction);B.style=sap.m.ButtonType.Reject;c._oControlStore.oButtonListHelper.ensureButton(B,"b",f);h=true}}if(c._oHeaderFooterOptions.buttonList){for(var i=0;i<c._oHeaderFooterOptions.buttonList.length;i++){var B={};jQuery.extend(B,c._oHeaderFooterOptions.buttonList[i]);B.style=sap.m.ButtonType.Default;c._oControlStore.oButtonListHelper.ensureButton(B,"b",f);h=true}}if(I){var g=this.getGenericButtons(f,c,c._oControlStore.oButtonListHelper);h=h||g.length>0}h=this.defineShareButton(c)||h;return h},defineShareButton:function(c){var b=this.getShareButtons(c);if(b.length==0){return false}if(!c._oControlStore.oShareSheet){c._oControlStore.oShareSheet=new sap.m.ActionSheet();c._oControlStore.oShareSheet.setShowCancelButton(true);c._oControlStore.oShareSheet.setPlacement(sap.m.PlacementType.Top)}else{c._oControlStore.oShareSheet.removeAllButtons()}var B={sIcon:"sap-icon://action",onBtnPressed:function(e){if(c._oHeaderFooterOptions.oJamOptions){if(c._oHeaderFooterOptions.oJamOptions.fGetShareSettings){var s=c._oHeaderFooterOptions.oJamOptions.fGetShareSettings();if(s){c._oControlStore.oJamShareButton.setJamData(s)}}if(c._oHeaderFooterOptions.oJamOptions.fGetDiscussSettings){var d=c._oHeaderFooterOptions.oJamOptions.fGetDiscussSettings();if(d){c._oControlStore.oJamDiscussButton.setJamData(d)}}}c._oControlStore.oShareSheet.openBy(e.getSource())}};c._oControlStore.oButtonListHelper.ensureButton(B,"b");for(var i=0;i<b.length;i++){c._oControlStore.oShareSheet.addButton(b[i])}return true},hasShareButtons:function(c){return c.isMainScreen()||!!(c._oHeaderFooterOptions.oEmailSettings||(c._oHeaderFooterOptions.oJamOptions&&(c._oHeaderFooterOptions.oJamOptions.oShareSettings||c._oHeaderFooterOptions.oJamOptions.fGetShareSettings||c._oHeaderFooterOptions.oJamOptions.oDiscussSettings||c._oHeaderFooterOptions.oJamOptions.fGetDiscussSettings))||c._oHeaderFooterOptions.oAddBookmarkSettings||(c._oHeaderFooterOptions.additionalShareButtonList&&c._oHeaderFooterOptions.additionalShareButtonList.length>0))},getShareButtons:function(c){var r=[];var e=this.getEmailButton(c);var j=this.getJamShareButton(c);var J=this.getJamDiscussButton(c);var b=this.getBookmarkButton(c);if(e){r.push(e)}if(j){r.push(j)}if(J){r.push(J)}if(b){r.push(b)}if(c._oHeaderFooterOptions.additionalShareButtonList){var a=this.getAdditionalShareButtons(c);r=r.concat(a)}return r},getEmailButton:function(c){if(!c._oHeaderFooterOptions.oEmailSettings){return null}if(!c._oControlStore.oEmailButton){c._oControlStore.oEmailButton=new sap.m.Button();c._oControlStore.oEmailButton.setIcon("sap-icon://email");c._oControlStore.oEmailButton.setText(this.oAppImp.UilibI18nModel.getResourceBundle().getText("SEND_EMAIL"));c._oControlStore.oEmailButton.attachPress(function(){if(c._oHeaderFooterOptions.oEmailSettings.fGetMailBody){var b=c._oHeaderFooterOptions.oEmailSettings.fGetMailBody()}else{var b=null}sap.m.URLHelper.triggerEmail(c._oHeaderFooterOptions.oEmailSettings.sRecepient,c._oHeaderFooterOptions.oEmailSettings.sSubject,b)})}this.supportEnablement(c,c._oControlStore.oEmailButton,c._oHeaderFooterOptions.oEmailSettings);return c._oControlStore.oEmailButton},getJamShareButton:function(c){if(!c._oHeaderFooterOptions.oJamOptions||!(c._oHeaderFooterOptions.oJamOptions.oShareSettings||c._oHeaderFooterOptions.oJamOptions.fGetShareSettings)){return null}if(!c._oControlStore.oJamShareButton){c._oControlStore.oJamShareButton=new sap.ushell.ui.footerbar.JamShareButton({})}if(c._oHeaderFooterOptions.oJamOptions.oShareSettings){c._oControlStore.oJamShareButton.setJamData(c._oHeaderFooterOptions.oJamOptions.oShareSettings);this.supportEnablement(c,c._oControlStore.oJamShareButton,c._oHeaderFooterOptions.oJamOptions.oShareSettings)}return c._oControlStore.oJamShareButton},getJamDiscussButton:function(c){if(!c._oHeaderFooterOptions.oJamOptions||!(c._oHeaderFooterOptions.oJamOptions.oDiscussSettings||c._oHeaderFooterOptions.oJamOptions.fGetDiscussSettings)){return null}if(!c._oControlStore.oJamDiscussButton){c._oControlStore.oJamDiscussButton=new sap.ushell.ui.footerbar.JamDiscussButton({})}if(c._oHeaderFooterOptions.oJamOptions.oDiscussSettings){c._oControlStore.oJamDiscussButton.setJamData(c._oHeaderFooterOptions.oJamOptions.oDiscussSettings);this.supportEnablement(c,c._oControlStore.oJamDiscussButton,c._oHeaderFooterOptions.oJamOptions.oDiscussSettings)}return c._oControlStore.oJamDiscussButton},getBookmarkButton:function(c){if(!c._oHeaderFooterOptions.oAddBookmarkSettings&&!c.isMainScreen()){return null}if(!c._oControlStore.oBookmarkButton){c._oControlStore.oBookmarkButton=new sap.ushell.ui.footerbar.AddBookmarkButton({})}var a={url:document.URL,title:c._oControlStore.oTitle.getText()};jQuery.extend(a,c._oHeaderFooterOptions.oAddBookmarkSettings||{});c._oControlStore.oBookmarkButton.setAppData(a);this.supportEnablement(c,c._oControlStore.oBookmarkButton,c._oHeaderFooterOptions.oAddBookmarkSettings||{});return c._oControlStore.oBookmarkButton},supportEnablement:function(c,b,s){b.setEnabled(!s.bDisabled);if(s.sId){c._oControlStore.oButtonListHelper.mButtons[s.sId]=b}},getAdditionalShareButtons:function(c){var r=[];if(!c._oControlStore.shareButtons){c._oControlStore.shareButtons=new sap.ca.scfld.md.app.ButtonListHelper(this.oAppImp,1);c._oControlStore.oButtonListHelper.addButtonListHelper(c._oControlStore.shareButtons)}for(var i=0;i<c._oHeaderFooterOptions.additionalShareButtonList.length;i++){var b={};jQuery.extend(b,c._oHeaderFooterOptions.additionalShareButtonList[i]);delete b.sIcon;var B=c._oControlStore.shareButtons.ensureButton(b,"b");r.push(B)}return r},getFooterRightCount:function(c,t){var l;var C=this.getActionsCount(c);switch(t){case"XL":l=this.detailHeaderFooterRules.maxBtnCountXL;break;case"L":l=this.detailHeaderFooterRules.maxBtnCountL;break;case"M":l=this.detailHeaderFooterRules.maxBtnCountM;break;case"S":l=this.detailHeaderFooterRules.maxBtnCountS;break;default:l=this.detailHeaderFooterRules.maxBtnCountXL}if(C<=l+1){return C}return l},getActionsCount:function(c){var C=0;if(c._oHeaderFooterOptions.buttonList){C=c._oHeaderFooterOptions.buttonList.length}if(c._oHeaderFooterOptions.oEditBtn){C++}if(c._oHeaderFooterOptions.oPositiveAction){C++}if(c._oHeaderFooterOptions.oNegativeAction){C++}return C},createSettingsButton:function(c){if(c._oControlStore.oSettingsButton){var r=false}else{var r=true;c._oControlStore.oSettingsButton=sap.ushell.services.AppConfiguration.getSettingsControl()}if(c._oHeaderFooterOptions.aAdditionalSettingButtons){if(!c._oControlStore.oSettingsButtonListHelper){c._oControlStore.oSettingsButtonListHelper=new sap.ca.scfld.md.app.ButtonListHelper(this.oAppImp,0);c._oControlStore.oButtonListHelper.addButtonListHelper(c._oControlStore.oSettingsButtonListHelper)}var b=[];for(var i=0;i<c._oHeaderFooterOptions.aAdditionalSettingButtons.length;i++){var B={};jQuery.extend(B,c._oHeaderFooterOptions.aAdditionalSettingButtons[i]);delete B.sIcon;var o=c._oControlStore.oSettingsButtonListHelper.ensureButton(B,"b");o.setWidth("100%");b.push(o)}c._oControlStore.oSettingsButton.setMenuItems(b)}return r},getGenericButtons:function(f,c,b){var r=[];if(c._oHeaderFooterOptions.oGroupOptions){r.push(this.addGroupButton(f,c,b))}if(c._oHeaderFooterOptions.oSortOptions){r.push(this.addSortButton(f,c,b))}if(c._oHeaderFooterOptions.oFilterOptions){r.push(this.addFilterButton(f,c,b))}return r},addFilterButton:function(f,c,b){var B={sId:c._oHeaderFooterOptions.oFilterOptions.sId,bDisabled:c._oHeaderFooterOptions.oFilterOptions.bDisabled,sIcon:"sap-icon://filter",sBtnTxt:this.oAppImp.UilibI18nModel.getResourceBundle().getText("FILTER")};if(c._oHeaderFooterOptions.oFilterOptions.aFilterItems){B.onChange=jQuery.proxy(function(k){c._oHeaderFooterOptions.oFilterOptions.onFilterSelected(k)},this);B.aItems=c._oHeaderFooterOptions.oFilterOptions.aFilterItems;B.sSelectedItemKey=c._oHeaderFooterOptions.oFilterOptions.sSelectedItemKey;var t="s"}else{B.onBtnPressed=jQuery.proxy(function(e){c._oHeaderFooterOptions.oFilterOptions.onFilterPressed(e)},this);var t="b"}return b.ensureButton(B,t,f)},addSortButton:function(f,c,b){var B={sId:c._oHeaderFooterOptions.oSortOptions.sId,bDisabled:c._oHeaderFooterOptions.oSortOptions.bDisabled,sIcon:"sap-icon://sort",sBtnTxt:this.oAppImp.UilibI18nModel.getResourceBundle().getText("SORT")};if(c._oHeaderFooterOptions.oSortOptions.aSortItems){B.onChange=jQuery.proxy(function(k){c._oHeaderFooterOptions.oSortOptions.onSortSelected(k)},this);B.aItems=c._oHeaderFooterOptions.oSortOptions.aSortItems;B.sSelectedItemKey=c._oHeaderFooterOptions.oSortOptions.sSelectedItemKey;var t="s"}else{B.onBtnPressed=jQuery.proxy(function(e){c._oHeaderFooterOptions.oSortOptions.onSortPressed(e)},this);var t="b"}return b.ensureButton(B,t,f)},addGroupButton:function(f,c,b){var B={sId:c._oHeaderFooterOptions.oGroupOptions.sId,bDisabled:c._oHeaderFooterOptions.oGroupOptions.bDisabled,sIcon:"sap-icon://group-2",sBtnTxt:this.oAppImp.UilibI18nModel.getResourceBundle().getText("GROUP")};if(c._oHeaderFooterOptions.oGroupOptions.aGroupItems){B.onChange=jQuery.proxy(function(k){c._oHeaderFooterOptions.oGroupOptions.onGroupSelected(k)},this);B.aItems=c._oHeaderFooterOptions.oGroupOptions.aGroupItems;B.sSelectedItemKey=c._oHeaderFooterOptions.oGroupOptions.sSelectedItemKey;var t="s"}else{B.onBtnPressed=jQuery.proxy(function(e){c._oHeaderFooterOptions.oGroupOptions.onGroupPressed(e)},this);var t="b"}return b.ensureButton(B,t,f)},ensureHeader:function(c,p,g){if(!c._oControlStore.oHeaderBar){c._oControlStore.oHeaderBar=new sap.m.Bar();c._oControlStore.oTitle=new sap.m.Label();c._oControlStore.oHeaderBar.addContentMiddle(c._oControlStore.oTitle);p.setCustomHeader(c._oControlStore.oHeaderBar)}this.setBackButton(c,c._oControlStore.oHeaderBar,g)},setBackButton:function(c,b,g){if(g&&c._oHeaderFooterOptions.onBack==undefined){if(window.history.length==0){c._oControlStore.fBack=null}else{c._oControlStore.fBack=function(){window.history.back(1)}}}else{c._oControlStore.fBack=c._oHeaderFooterOptions.onBack}if(c._oControlStore.oBackButton){c._oControlStore.oBackButton.setVisible(!!c._oControlStore.fBack)}else if(c._oControlStore.fBack){c._oControlStore.oBackButton=new sap.m.Button();c._oControlStore.oBackButton.setIcon("sap-icon://nav-back");c._oControlStore.oBackButton.attachPress(function(e){c._oControlStore.fBack(e)});b.addContentLeft(c._oControlStore.oBackButton)}},getGenericCount:function(c){var r=0;if(c._oHeaderFooterOptions.oSortOptions){r++}if(c._oHeaderFooterOptions.oFilterOptions){r++}if(c._oHeaderFooterOptions.oGroupOptions){r++}return r}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.ConnectionManager')){jQuery.sap.declare("sap.ca.scfld.md.app.ConnectionManager");jQuery.sap.require('sap.ui.core.util.MockServer');jQuery.sap.require('sap.ca.ui.message.message');jQuery.sap.require('sap.ca.ui.utils.busydialog');sap.ui.base.ManagedObject.extend("sap.ca.scfld.md.app.ConnectionManager",{metadata:{properties:{identity:"string",configuration:"object",defaultConfiguration:"object",component:"object"}},modelList:{},mockServerList:{},initModels:function(){this.iRequestCount=0;var s=this.getConfiguration().getServiceList();var e=this.getConfiguration().getExcludedQueryStringParameters();if(e==null){e=new Array()}var a=this.getConfiguration().isMock();var t=this;var b=jQuery.sap.getUriParameters().get("sap-server");var c=jQuery.sap.getUriParameters().get("sap-host");var d=jQuery.sap.getUriParameters().get("sap-host-http");var f=jQuery.sap.getUriParameters().get("sap-client");var C=t.getComponent();if(!sap.ui.getCore().getConfiguration().getDisableCustomizing()&&C&&C.getMetadata()){var o=C.getMetadata().getConfig();var g=o["sap.ca.serviceConfigs"];var m=function(S,E){var k,l;for(var i=0;i<S.length;i++){k=S[i];for(var j=0;j<E.length;j++){l=E[j];if(k.name==l.name){for(var n in l){k[n]=l[n]}E.splice(j,1);j--}}};S=S.concat(E);return S};if(g!=undefined&&g.length>0){var h=m(s,g);s=h}}if(s!=null){jQuery.each(s,function(i,j){var u=URI(j.serviceUrl);if(b!=null&&(jQuery.inArray("sap-server",e)==-1)){u.addSearch("sap-server",b)}else if(c!=null&&(jQuery.inArray("sap-host",e)==-1)){u.addSearch("sap-host",c)}else if(d!=null&&(jQuery.inArray("sap-host-http",e)==-1)){u.addSearch("sap-host-http",d)}if(f!=null&&(jQuery.inArray("sap-client",e)==-1)){u.addSearch("sap-client",f)}var U=u.toString();if(a){var M=U;if(!jQuery.sap.endsWith(M,"/")){M+="/"}var k=new sap.ui.core.util.MockServer({rootUri:M});if(j.mockedDataSource){k.simulate(j.mockedDataSource,j.mockedDataSource.replace(new RegExp("[^/]*$"),""))}else{k.simulate(U+"/$metadata")}k.start();t.mockServerList[j.name]=k;if(j.isDefault){t.mockServerList[undefined]=k}}var l=new sap.ui.model.odata.ODataModel(U,true);if((j.useBatch)&&!a){l.setUseBatch(true)}if(j.countSupported){l.setCountSupported(true)}else{l.setCountSupported(false)}if(!l.getServiceMetadata()){var I=t.getProperty("configuration").oApplicationFacade.oApplicationImplementation.UilibI18nModel.getResourceBundle();var S={type:sap.ca.ui.message.Type.ERROR,message:I.getText("ERROR_MSG_NO_METADATA",[j.name]),details:I.getText("ERROR_DETAIL_NO_METADATA",[j.serviceUrl])};sap.ca.ui.message.showMessageBox(S);return}if(j.fRequestFailed){l.attachRequestFailed(null,j.fRequestFailed)}else{l.attachRequestFailed(null,jQuery.proxy(t.handleRequestFailed,t))}if(j.noBusyIndicator==true){l.attachRequestSent(null,jQuery.proxy(t.handleRequestSentInner,t));l.attachRequestCompleted(null,jQuery.proxy(t.handleRequestCompletedInner,t))}else{l.attachRequestSent(null,jQuery.proxy(t.handleRequestSent,t));l.attachRequestCompleted(null,jQuery.proxy(t.handleRequestCompleted,t))}if(j.isDefault){t.modelList[undefined]=l;t.setDefaultConfiguration(j)}else{t.modelList[j.name]=l}})}},setIdentity:function(i){var o=this.getIdentity();if(o!=i){this.setProperty("identity",i)}},getModel:function(n){return this.modelList[n]},handleRequestSent:function(e){sap.ca.ui.utils.busydialog.requireBusyDialog();this.handleRequestSentInner(e)},handleRequestSentInner:function(e){this.iRequestCount++;jQuery.sap.log.info("Connection Manager","Request sent")},handleRequestFailed:function(e){jQuery.sap.log.error("Connection Manager","Failed to load data");var s={type:sap.ca.ui.message.Type.ERROR,message:e.getParameter("message"),details:e.getParameter("responseText")};sap.ca.ui.message.showMessageBox(s)},handleRequestCompleted:function(e){sap.ca.ui.utils.busydialog.releaseBusyDialog();this.handleRequestCompletedInner(e)},handleRequestCompletedInner:function(e){if(e.getParameter("success")){jQuery.sap.log.info("Connection Manager","Request succesfully completed")}else{jQuery.sap.log.info("Connection Manager","Request completed with errors",e.getParameter("message"))}}});sap.ca.scfld.md.app.ConnectionManager.getNewInstance=function(i,c,d,C){var o=new sap.ca.scfld.md.app.ConnectionManager({identity:i,configuration:c,defaultConfiguration:d,component:C});o.initModels();return o}};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.DetailHeaderFooterHelper')){jQuery.sap.declare("sap.ca.scfld.md.app.DetailHeaderFooterHelper");sap.ui.base.Object.extend("sap.ca.scfld.md.app.DetailHeaderFooterHelper",{constructor:function(a){this.oAppImp=a;this.oCommonHeaderFooterHelper=new sap.ca.scfld.md.app.CommonHeaderFooterHelper(a,this.detailHeaderFooterRules)},detailHeaderFooterRules:{maxBtnCountXL:4,maxBtnCountL:3,maxBtnCountM:2,maxBtnCountS:1},defineDetailHeaderFooter:function(c){var o=c.getHeaderFooterOptions();this.setHeaderFooter(c,o)},setHeaderFooter:function(c,o){if(!o){return}var p=this.oCommonHeaderFooterHelper.startBuild(c,o);this.defineHeader(c,p);this.defineFooter(c,p);this.oCommonHeaderFooterHelper.endBuild(c)},defineFooter:function(c,p){var t;if(c.oApplicationImplementation.bIsPhone&&jQuery.device.is.portrait){t="S"}else if(c.oApplicationImplementation.bIsPhone&&jQuery.device.is.landscape){t="M"}else{t="XL"}var f=this.oCommonHeaderFooterHelper.getFooterRightCount(c,t);var h=this.oCommonHeaderFooterHelper.defineFooterRight(c,p,f,false,true);p.setShowFooter(h||c.isMainScreen())},defineHeader:function(c,p){this.oCommonHeaderFooterHelper.ensureHeader(c,p,jQuery.device.is.phone);if(c._oHeaderFooterOptions.oUpDownOptions){this.setUpDownButtons(c,c._oHeaderFooterOptions.oUpDownOptions.iPosition,c._oHeaderFooterOptions.oUpDownOptions.iCount);var P=this.getPositionPars(c);if(jQuery.device.is.phone){if(c._oHeaderFooterOptions.oUpDownOptions.sI18NPhoneTitle){var b=this.oAppImp.getResourceBundle();var k=c._oHeaderFooterOptions.oUpDownOptions.sI18NPhoneTitle}else{var b=this.oAppImp.getUiLibResourceBundle();var k="ITEM_TITLE_PHONE"}}else{if(c._oHeaderFooterOptions.oUpDownOptions.sI18NDetailTitle){var b=this.oAppImp.getResourceBundle();var k=c._oHeaderFooterOptions.oUpDownOptions.sI18NDetailTitle}else{var b=this.oAppImp.getUiLibResourceBundle();var k="ITEM_TITLE"}}var t=b.getText(k,P)}else{this.setUpDownButtons(c,0,0);if(c._oHeaderFooterOptions.sI18NDetailTitle){var b=this.oAppImp.getResourceBundle();var t=b.getText(c._oHeaderFooterOptions.sI18NDetailTitle)}else if(c._oHeaderFooterOptions.sDetailTitle){var t=c._oHeaderFooterOptions.sDetailTitle}else{var b=this.oAppImp.getResourceBundle();var t=b.getText("DETAIL_TITLE")}}c._oControlStore.oTitle.setText(t)},setUpDownButtons:function(c,p,C){if(C<=1){if(c._oControlStore.oUpButton){c._oControlStore.oUpButton.setVisible(false);c._oControlStore.oDownButton.setVisible(false)}}else{if(!c._oControlStore.oUpButton){var m=function(d){c._oHeaderFooterOptions.oUpDownOptions.fSetPosition(c._oHeaderFooterOptions.oUpDownOptions.iPosition+d)};c._oControlStore.oUpButton=new sap.m.Button();c._oControlStore.oUpButton.setIcon("sap-icon://down");c._oControlStore.oUpButton.attachPress(function(){m(1)});c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oUpButton);c._oControlStore.oDownButton=new sap.m.Button();c._oControlStore.oDownButton.setIcon("sap-icon://up");c._oControlStore.oDownButton.attachPress(function(){m(-1)});c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oDownButton)}c._oControlStore.oUpButton.setVisible(true);c._oControlStore.oDownButton.setVisible(true);c._oControlStore.oUpButton.setEnabled(p<C-1);c._oControlStore.oDownButton.setEnabled(p>0)}},getPositionPars:function(c){if(c._oHeaderFooterOptions){var r=[c._oHeaderFooterOptions.oUpDownOptions.iPosition+1,c._oHeaderFooterOptions.oUpDownOptions.iCount];if(c._oHeaderFooterOptions.oUpDownOptions.oParent){r=r.concat(this.getPositionPars(c._oHeaderFooterOptions.oUpDownOptions.oParent))}return r}return[]}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.FullScreenHeaderFooterHelper')){jQuery.sap.declare("sap.ca.scfld.md.app.FullScreenHeaderFooterHelper");jQuery.sap.require('sap.ushell.ui.footerbar.JamShareButton');jQuery.sap.require('sap.ushell.ui.footerbar.JamDiscussButton');jQuery.sap.require('sap.ushell.ui.footerbar.AddBookmarkButton');sap.ui.base.Object.extend("sap.ca.scfld.md.app.FullScreenHeaderFooterHelper",{constructor:function(a){this.oAppImp=a;this.oCommonHeaderFooterHelper=new sap.ca.scfld.md.app.CommonHeaderFooterHelper(a,this.detailHeaderFooterRules)},detailHeaderFooterRules:{maxBtnCountXL:4,maxBtnCountL:3,maxBtnCountM:2,maxBtnCountS:1},defineHeaderFooter:function(c){var o=c.getHeaderFooterOptions();this.setHeaderFooter(c,o)},setHeaderFooter:function(c,o){if(!o){return}var p=this.oCommonHeaderFooterHelper.startBuild(c,o,{iSettingsPosition:0});this.oCommonHeaderFooterHelper.createSettingsButton(c);var h=this.needsFooter(c);this.defineHeader(c,p,h);this.defineFooter(c,p,h);this.oCommonHeaderFooterHelper.endBuild(c)},defineFooter:function(c,p,h){if(h){if(c._oControlStore.iSettingsPosition>-1){if(c._oControlStore.iSettingsPosition==1){c._oControlStore.oHeaderBar.removeContentRight(c._oControlStore.oSettingsButton)}c._oControlStore.oButtonListHelper.oBar.insertContentLeft(c._oControlStore.oSettingsButton,0);c._oControlStore.iSettingsPosition=-1}var f=this.getFooterRightCount(c);this.oCommonHeaderFooterHelper.defineFooterRight(c,p,f,this.oAppImp.bIsPhone,false);if(!this.oAppImp.bIsPhone){if(!c._oControlStore.oLeftButtonList){c._oControlStore.oLeftButtonList=new sap.ca.scfld.md.app.ButtonListHelper(this.oAppImp,25);c._oControlStore.oLeftButtonList.oBar=c._oControlStore.oButtonListHelper.oBar;c._oControlStore.oButtonListHelper.addButtonListHelper(c._oControlStore.oLeftButtonList)}this.oCommonHeaderFooterHelper.getGenericButtons(3,c,c._oControlStore.oLeftButtonList)}}},defineHeader:function(c,p,h){this.oCommonHeaderFooterHelper.ensureHeader(c,p,true);if(c._oHeaderFooterOptions.sI18NFullscreenTitle){var b=this.oAppImp.getResourceBundle();var t=b.getText(c._oHeaderFooterOptions.sI18NFullscreenTitle)}else if(c._oHeaderFooterOptions.sFullscreenTitle){var t=c._oHeaderFooterOptions.sFullscreenTitle}else{var b=this.oAppImp.getResourceBundle();var t=b.getText("FULLSCREEN_TITLE")}c._oControlStore.oTitle.setText(t);if(!h){if(c._oControlStore.iSettingsPosition<1){if(c._oControlStore.iSettingsPosition==-1){c._oControlStore.oButtonListHelper.oBar.removeContentLeft(c._oControlStore.oSettingsButton)}c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oSettingsButton);c._oControlStore.iSettingsPosition=1}}if(c._oControlStore.oFacetFilterButton){c._oControlStore.oFacetFilterButton.setVisible(!!c._oHeaderFooterOptions.onFacetFilter)}else if(c._oHeaderFooterOptions.onFacetFilter){c._oControlStore.oFacetFilterButton=new sap.m.Button();c._oControlStore.oFacetFilterButton.setIcon("sap-icon://filter");c._oControlStore.oFacetFilterButton.attachPress(function(e){c._oHeaderFooterOptions.onFacetFilter(e)});c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oFacetFilterButton)}},needsFooter:function(c){return c._oHeaderFooterOptions.onFacetFilter||this.oCommonHeaderFooterHelper.getGenericCount(c)>0||this.oCommonHeaderFooterHelper.getActionsCount(c)>0||this.oCommonHeaderFooterHelper.hasShareButtons(c)},getFooterRightCount:function(c){var t;if(c.oApplicationImplementation.bIsPhone&&jQuery.device.is.portrait){t="S"}else if(c.oApplicationImplementation.bIsPhone&&jQuery.device.is.landscape){t="M"}else{t="XL"}if(this.oAppImp.bIsPhone){var C=this.oCommonHeaderFooterHelper.getActionsCount(c);if(C<2){return 4}if(C==2&&this.oCommonHeaderFooterHelper.getGenericCount(c)==0){return 2}}return this.oCommonHeaderFooterHelper.getFooterRightCount(c,t)}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.MasterHeaderFooterHelper')){jQuery.sap.declare("sap.ca.scfld.md.app.MasterHeaderFooterHelper");sap.ui.base.Object.extend("sap.ca.scfld.md.app.MasterHeaderFooterHelper",{constructor:function(a){this.oApplicationImplementation=a;this.oCommonHeaderFooterHelper=new sap.ca.scfld.md.app.CommonHeaderFooterHelper(a,{})},defineMasterHeaderFooter:function(c){this.defineMasterHeaderFooterInner(c)},defineMasterHeaderFooterInner:function(c){var o=c.getHeaderFooterOptions();if(!o){return}var p=this.oCommonHeaderFooterHelper.startBuild(c,o,{bEditState:false});this.defineHeader(c,p);this.defineFooter(c,p);this.oCommonHeaderFooterHelper.endBuild(c)},defineHeader:function(c,p){var C=p.getCustomHeader();if(!C){C=new sap.m.Bar();p.setCustomHeader(C)}this.defineMasterSubHeader(c,p);var a=-1;if(!c.isBackendSearch()){if(c._oControlStore.oMasterSearchField){var f=c._oControlStore.oMasterSearchField.getValue();if(f){a=c.applySearchPattern(f)}}}if(a<0){var l=c.getList();var I=l.getItems();a=0;for(var i=0;i<I.length;i++){if(!(I[i]instanceof sap.m.GroupHeaderListItem)){a++}}}this.defineMasterTitle(c,C,a);this.oCommonHeaderFooterHelper.setBackButton(c,C,true);this.defineEditButton(c,C)},defineFooter:function(c,p){this.defineSettingsButton(c);this.defineFooterRight(c)},defineMasterSubHeader:function(c,p){if(c._oControlStore.oMasterSearchField||c._oControlStore.oMasterPullToRefresh){return}var s=new sap.m.Bar();p.setSubHeader(s);var i=sap.ui.Device.support.touch;this.createMasterSearchField(c,s,i);if(i){this.createMasterPullToRefresh(c,p)}},createMasterSearchField:function(c,s,i){c._oControlStore.oMasterSearchField=new sap.m.SearchField();c._oControlStore.oMasterSearchField.setShowRefreshButton(!i);c._oControlStore.sMasterSearchText=null;c._oControlStore.oMasterSearchField.attachSearch(jQuery.proxy(function(e){this.handleMasterSearch(c,e)},this));if(c.isLiveSearch()){c._oControlStore.oMasterSearchField.attachLiveChange(jQuery.proxy(c._applyClientSideSearch,c))}if(c._oHeaderFooterOptions.sI18NSearchFieldPlaceholder){var b=this.oApplicationImplementation.AppI18nModel.getResourceBundle();var p=b.getText(c._oHeaderFooterOptions.sI18NSearchFieldPlaceholder)}else{var b=this.oApplicationImplementation.UilibI18nModel.getResourceBundle();var p=b.getText("MASTER_PLACEHOLDER_SEARCHFIELD")}c._oControlStore.oMasterSearchField.setPlaceholder(p);s.addContentMiddle(c._oControlStore.oMasterSearchField)},createMasterPullToRefresh:function(c,p){c._oControlStore.oMasterPullToRefresh=new sap.m.PullToRefresh();c._oControlStore.oMasterPullToRefresh.attachRefresh(jQuery.proxy(function(){this.handleMasterPullToRefresh(c)},this));p.insertContent(c._oControlStore.oMasterPullToRefresh,0)},handleMasterSearch:function(c,e){var b=c.isBackendSearch();var i=e.getParameter("refreshButtonPressed");if(i||b){this.refreshList(c,i)}if(!b&&!c.isLiveSearch()){c._applyClientSideSearch()}},handleMasterPullToRefresh:function(c){this.refreshList(c,true)},refreshList:function(c,I){var b=c.isBackendSearch();I=I&&c._oControlStore.sMasterSearchText!=null;if(I){var t=c._oControlStore.sMasterSearchText;c._oControlStore.oMasterSearchField.setValue(t)}else{var t=c._oControlStore.oMasterSearchField.getValue()}var l=c.getList();this.oApplicationImplementation.aKeyValues=null;if(this.oApplicationImplementation.aMasterKeys){var a=l.getItems();for(var i=0;i<a.length;i++){var L=a[i];if(L.getSelected()){this.oApplicationImplementation.aKeyValues=[];var o=L.getBindingContext(this.sModelName);for(var j=0;j<this.oApplicationImplementation.aMasterKeys.length;j++){this.oApplicationImplementation.aKeyValues.push(o.getProperty(this.oApplicationImplementation.aMasterKeys[j]))}i=a.length}}}var B=c._oMasterListBinding;var d=!B;if(B){B.attachChange(c._onMasterListLoaded,c);var r=jQuery.proxy(function(){if(c._oControlStore.oMasterPullToRefresh){c._oControlStore.oMasterPullToRefresh.hide()}if(b){c._oControlStore.sMasterSearchText=t;c._oControlStore.oMasterSearchField.setValue(c._oControlStore.sMasterSearchText)}B.detachDataReceived(r)},this);var R=jQuery.proxy(function(){d=true;B.detachDataRequested(R)},this);B.attachDataRequested(R);B.attachDataReceived(r)}if(b&&!I){var s=c.applyBackendSearchPattern(t,B);if(s){B.detachDataRequested(R);B.detachDataReceived(r);return}if(B&&B!=c._oMasterListBinding){B.detachDataRequested(R);B.detachDataReceived(r);c._oControlStore.sMasterSearchText=t;return}}if(!d&&c._oMasterListBinding){c._oMasterListBinding.refresh()}},defineMasterTitle:function(c,C,i){if(!c._oHeaderFooterOptions.sI18NMasterTitle){return}if(!c._oControlStore.oMasterTitle){c._oControlStore.oMasterTitle=new sap.m.Text();C.addContentMiddle(c._oControlStore.oMasterTitle)}this.setMasterTitle(c,i)},setMasterTitle:function(c,C){if(!c._oControlStore.oMasterTitle){return}var b=this.oApplicationImplementation.AppI18nModel.getResourceBundle();var t=b.getText(c._oHeaderFooterOptions.sI18NMasterTitle,[C]);c._oControlStore.oMasterTitle.setText(t)},defineEditButton:function(c,C){if(c._oHeaderFooterOptions.onEditPress||c._oHeaderFooterOptions.oEditBtn){if(!c._oControlStore.oEditBtn){c._oControlStore.oEditBtn=new sap.m.Button();C.addContentRight(c._oControlStore.oEditBtn);c._oControlStore.oEditBtn.attachPress(jQuery.proxy(function(){if(c._oControlStore.bEditState){c._oControlStore.oEditBtn.setIcon("sap-icon://multi-select")}else{c._oControlStore.oEditBtn.setIcon("sap-icon://sys-cancel")}c._oControlStore.bEditState=!c._oControlStore.bEditState;c._oControlStore.oSettingsButton.setVisible(!c._oControlStore.bEditState);(c._oHeaderFooterOptions.onEditPress||c._oHeaderFooterOptions.oEditBtn.onBtnPressed)(c._oControlStore.bEditState)},this))}if(c._oControlStore.bEditState){c._oControlStore.oEditBtn.setIcon("sap-icon://sys-cancel")}else{c._oControlStore.oEditBtn.setIcon("sap-icon://multi-select")}c._oControlStore.oEditBtn.setVisible(true);c._oControlStore.oEditBtn.setEnabled(!!(c._oHeaderFooterOptions.onEditPress||!c._oHeaderFooterOptions.oEditBtn.bDisabled));if(c._oHeaderFooterOptions.oEditBtn&&c._oHeaderFooterOptions.oEditBtn.sId){c._oControlStore.oButtonListHelper.mButtons[c._oHeaderFooterOptions.oEditBtn.sId]=c._oControlStore.oEditBtn}}else if(c._oControlStore.oEditBtn){c._oControlStore.oEditBtn.setVisible(false)}},defineSettingsButton:function(c){var i=this.oCommonHeaderFooterHelper.createSettingsButton(c);if(i){c._oControlStore.oButtonListHelper.oBar.addContentLeft(c._oControlStore.oSettingsButton)}c._oControlStore.oSettingsButton.setVisible(!c._oControlStore.bEditState)},defineFooterRight:function(c){var f=this.getFooterRightCount(c);this.oCommonHeaderFooterHelper.getGenericButtons(f,c,c._oControlStore.oButtonListHelper);if(c._oHeaderFooterOptions.buttonList){for(var i=0;i<c._oHeaderFooterOptions.buttonList.length;i++){var b={};jQuery.extend(b,c._oHeaderFooterOptions.buttonList[i]);delete b.sIcon;c._oControlStore.oButtonListHelper.ensureButton(b,"b",f)}}if(c._oHeaderFooterOptions.onAddPress||c._oHeaderFooterOptions.oAddOptions){this.addAddButton(c)}},getFooterRightCount:function(c){var g=this.oCommonHeaderFooterHelper.getGenericCount(c);if(g>0&&c.oApplicationImplementation.bIsPhone&&jQuery.device.is.landscape){return g+1}else if(g>0){return g}else{return 1}},addAddButton:function(c){if(c._oHeaderFooterOptions.onAddPress){var b={onBtnPressed:c._oHeaderFooterOptions.onAddPress}}else{var b={};jQuery.extend(b,c._oHeaderFooterOptions.oAddOptions);delete b.sBtnText;delete b.sI18nBtnTxt}b.sIcon="sap-icon://add";c._oControlStore.oButtonListHelper.ensureButton(b,"b")}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.controller.BaseDetailController')){jQuery.sap.declare('sap.ca.scfld.md.controller.BaseDetailController');jQuery.sap.require('sap.ui.core.mvc.Controller');sap.ui.core.mvc.Controller.extend("sap.ca.scfld.md.controller.BaseDetailController",{constructor:function(){this.oApplicationImplementation=sap.ca.scfld.md.app.Application.getImpl();var m=jQuery.proxy(function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oApplicationFacade=sap.ca.scfld.md.app.Application.getImpl().oConfiguration.oApplicationFacade;this.oConnectionManager=sap.ca.scfld.md.app.Application.getImpl().getConnectionManager();this.oApplicationImplementation.setModels(this);var p=this.getView().getContent()[0];p.setShowNavButton(jQuery.device.is.phone);p.attachNavButtonPress(this._navBack);var M=jQuery.proxy(function(e){this.oApplicationImplementation.defineDetailHeaderFooter(this)},this);if(typeof this.onBeforeShow==="function"){var A=jQuery.proxy(this.onBeforeShow,this);this.onBeforeShow=function(e){A(e);M(e)}}else{this.getView().addEventDelegate({onBeforeShow:jQuery.proxy(function(e){M()},this)})}},this);var a=jQuery.proxy(this.onInit,this);this.onInit=function(){m();a()}},onInit:function(){},getHeaderFooterOptions:function(){return null},setHeaderFooterOptions:function(o){this.oApplicationImplementation.oDHFHelper.setHeaderFooter(this,o)},setBtnEnabled:function(i,e){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnEnabled(i,e)}},setBtnText:function(i,t){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnText(i,t)}},isMainScreen:function(){return!this._oControlStore.oBackButton},_navBack:function(){window.history.back()}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.controller.BaseMasterController')){jQuery.sap.declare('sap.ca.scfld.md.controller.BaseMasterController');jQuery.sap.require('sap.ui.core.mvc.Controller');sap.ui.core.mvc.Controller.extend("sap.ca.scfld.md.controller.BaseMasterController",{constructor:function(){var t=this;var m=jQuery.proxy(function(){var i=true;this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oApplicationImplementation=sap.ca.scfld.md.app.Application.getImpl();this.oApplicationFacade=this.oApplicationImplementation.oConfiguration.oApplicationFacade;this.oConnectionManager=this.oApplicationImplementation.getConnectionManager();this.iRequestCountStart=this.oConnectionManager.iRequestCount;this.oApplicationImplementation.setModels(this);this.oRouter.attachRoutePatternMatched(function(e){var n=e.getParameter("name");var N;var I=i;i=false;this._bIsDetailRoute=false;this._bIsMasterRoute=false;if(n==="detail"){this._bIsDetailRoute=true;N="/"+e.getParameter("arguments").contextPath;if(!I&&this._hashParam!==N){this._hashParam=N;this._selectDetail()}}if(n==="master"){this._bIsMasterRoute=true}this._hashParam=N},this)},this);var a=jQuery.proxy(this.onInit,this);this.onInit=jQuery.proxy(function(){m();a();if(!this.bIsMasterListBindingExists){var l=this.getList();if(l){var b=l.getBinding("items");this.oApplicationImplementation.setMasterListBinding(this,b)}}if(this.iRequestCountStart==this.oConnectionManager.iRequestCount){this.oApplicationImplementation.oMHFHelper.defineMasterHeaderFooter(this)}},this)},onInit:function(){},_onMasterListLoaded:function(e){if(e.getParameter("reason")==="change"){this.onDataLoaded();this.oApplicationImplementation.onMasterRefreshed(this);e.oSource.detachChange(this._onMasterListLoaded,this)}},_onMasterListChanged:function(e){if(e.getParameter("reason")==="change"){this.oApplicationImplementation.onMasterChanged(this)}},getHeaderFooterOptions:function(){return null},setBtnEnabled:function(i,e){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnEnabled(i,e)}},setBtnText:function(i,t){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnText(i,t)}},refreshHeaderFooterForEditToggle:function(){this.oApplicationImplementation.oMHFHelper.defineMasterHeaderFooterInner(this)},_handleSelect:function(e){this.setListItem(e.getParameter("listItem"));if(!jQuery.device.is.phone){this.oApplicationImplementation.oSplitContainer.hideMaster()}},_handleItemPress:function(e){this.setListItem(e.getSource())},getList:function(){return this.byId("list")},setListItem:function(i){var l=this.getList();l.removeSelections();i.setSelected(true);l.setSelectedItem(i,true);this.oRouter.navTo("detail",{contextPath:i.getBindingContext(this.sModelName).getPath().substr(1)},!jQuery.device.is.phone)},onDataLoaded:function(){this._selectDetail()},_selectDetail:function(){var l=this.getList();var a=l.getItems();if(!(this._bIsDetailRoute||this._bIsMasterRoute)){return}if(a.length===0&&this.oRouter._oRoutes.noData!==undefined){this.navToEmptyView();return}if(!jQuery.device.is.phone&&this._bIsMasterRoute&&!l.getSelectedItem()){if(l.getBindingInfo("items").binding.isGrouped()){if(a.length>1){this.setListItem(a[1])}else{jQuery.sap.log.error("Selection of the first list item failed as there is only 1 item in a grouped list")}}else{this.setListItem(a[0])}}if(this._bIsDetailRoute){for(var i=0;i<a.length;i++){if((a[i]instanceof sap.m.GroupHeaderListItem)){continue}if(a[i].getBindingContext(this.sModelName).getPath()!=this._hashParam){continue}if(!jQuery.device.is.phone){l.removeSelections();a[i].setSelected(true)}return}if(this.isBackendSearch()){this.applyFilterFromContext(this._hashParam)}else{this.navToEmptyView()}}},navToEmptyView:function(){this.oRouter.navTo("noData",{viewTitle:"DETAIL_TITLE",languageKey:"NO_ITEMS_AVAILABLE"});return this},applySearchPattern:function(f){f=f.toLowerCase();var l=this.getList().getItems();var v;var c=0;for(var i=0;i<l.length;i++){v=this.applySearchPatternToListItem(l[i],f);l[i].setVisible(v);if(v){c++}}return c},applyBackendSearchPattern:function(f,b){},applyFilterFromContext:function(c){this.navToEmptyView()},applySearchPatternToListItem:function(i,f){if(f==""){return true}var I=i.getBindingContext(this.sModelName).getProperty();for(var k in I){var v=I[k];if(typeof v=="string"){if(v.toLowerCase().indexOf(f)!=-1){return true}}}if((i.getIntro()&&i.getIntro().toLowerCase().indexOf(f)!=-1)||(i.getTitle()&&i.getTitle().toLowerCase().indexOf(f)!=-1)||(i.getNumber()&&i.getNumber().toLowerCase().indexOf(f)!=-1)||(i.getNumberUnit()&&i.getNumberUnit().toLowerCase().indexOf(f)!=-1)||(i.getFirstStatus()&&i.getFirstStatus().getText().toLowerCase().indexOf(f)!=-1)||(i.getSecondStatus()&&i.getSecondStatus().getText().toLowerCase().indexOf(f)!=-1)){return true}var a=i.getAttributes();for(var j=0;j<a.length;j++){if(a[j].getText().toLowerCase().indexOf(f)!=-1){return true}}return false},_applyClientSideSearch:function(){var f=this._oControlStore.oMasterSearchField.getValue();var c=this.applySearchPattern(f);this.oApplicationImplementation.oMHFHelper.setMasterTitle(this,c)},isLiveSearch:function(){return!this.isBackendSearch()},isBackendSearch:function(){return false},registerMasterListBind:function(l){if(l){var b=l.getBinding("items");this.oApplicationImplementation.setMasterListBinding(this,b)}if(this.iRequestCountStart==this.oConnectionManager.iRequestCount){this.oApplicationImplementation.oMHFHelper.defineMasterHeaderFooter(this)}}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright
 * 		2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ca.scfld.md.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.viz.library');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ca.ui.library');sap.ui.getCore().initLibrary({name:"sap.ca.scfld.md",dependencies:["sap.ui.core","sap.viz","sap.m","sap.ca.ui"],types:[],interfaces:[],controls:[],elements:[],noLibraryCSS:true,version:"1.16.3"})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.view.empty.controller')){jQuery.sap.declare('sap.ca.scfld.md.view.empty.controller');sap.ca.scfld.md.controller.BaseDetailController.extend("sap.ca.scfld.md.view.empty",{onInit:function(){var l=document.createElement('link');l.setAttribute('rel','stylesheet');l.setAttribute('type','text/css');l.setAttribute('href','resources/sap/ca/scfld/md/css/flower.css');l.setAttribute('id','emptyView_stylesheet');document.getElementsByTagName('head')[0].appendChild(l);this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="noData"){var a=e.getParameter("arguments");var p=this.byId("sap.ca.scfld.md.view.empty");var t=this.oApplicationFacade.oApplicationImplementation.getResourceBundle().getText(a.viewTitle);if(t==undefined||t==a.viewTitle){t=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText("NO_ITEMS_AVAILABLE")};p.setTitle(t);var L=this.byId("emptyLabel");var m=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText(a.languageKey);if(m==undefined||m==a.languageKey){m=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText("NO_ITEMS_AVAILABLE")};L.setText(m)}},this)}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.ApplicationImplementation')){jQuery.sap.declare("sap.ca.scfld.md.app.ApplicationImplementation");sap.ui.base.ManagedObject.extend("sap.ca.scfld.md.app.ApplicationImplementation",{metadata:{properties:{identity:"string",component:"object",oViewHook:"string"},methods:["getConnectionManager"]},init:function(){},sI18N:"i18n",startApplication:function(c){this.oMHFHelper=new sap.ca.scfld.md.app.MasterHeaderFooterHelper(this);this.oDHFHelper=new sap.ca.scfld.md.app.DetailHeaderFooterHelper(this);this.oFHFHelper=new sap.ca.scfld.md.app.FullScreenHeaderFooterHelper(this);this.oConfiguration=c;this.aMasterKeys=c.getMasterKeyAttributes();this.aKeyValues=null;var l=sap.ui.getCore().getConfiguration().getFormatLocale();var b=this.getIdentity()+".i18n.i18n";this.AppI18nModel=new sap.ui.model.resource.ResourceModel({bundleName:b,bundleLocale:l});var C=this.getComponent();if(!sap.ui.getCore().getConfiguration().getDisableCustomizing()){var m=C.getMetadata();if(m){var e=m.getConfig("sap.ca.i18Nconfigs");if(e.bundleName){this.AppI18nModel.enhance(e)}}}this.UilibI18nModel=new sap.ui.model.resource.ResourceModel({bundleName:"sap.ca.scfld.md.i18n.i18n",bundleLocale:l});this.oConnectionManager=sap.ca.scfld.md.app.ConnectionManager.getNewInstance(this.getIdentity(),this.oConfiguration,{},this.getComponent());this.bIsPhone=jQuery.device.is.phone;var h=sap.ui.getCore().byId(this.getOViewHook());h.setModel(this.AppI18nModel,this.sI18N)},getResourceBundle:function(){return this.AppI18nModel.getResourceBundle()},getUiLibResourceBundle:function(){return this.UilibI18nModel.getResourceBundle()},getODataModel:function(n){if(n==this.sI18N){return this.AppI18nModel}return this.oConnectionManager.getModel(n)},setModels:function(c){var v=c.getView();v.setModel(this.AppI18nModel,this.sI18N);v.setModel(sap.ui.getCore().getModel("device"),"device");jQuery.each(this.oConnectionManager.modelList,function(n,m){if(n=="undefined"){v.setModel(m)}else{v.setModel(m,n)}})},isMock:function(){var r=jQuery.sap.getUriParameters().get("responderOn");return("true"===r)},getConnectionManager:function(){return this.oConnectionManager},onMasterRefreshed:function(c){this.setStoredSelectedItem(c)},onMasterChanged:function(c){this.oMHFHelper.defineMasterHeaderFooter(c)},setStoredSelectedItem:function(c){if(!this.aKeyValues){return}var l=c.getList();var I=l.getItems();if(I.length==0){return}l.removeSelections();for(var i=0;i<I.length;i++){var f=true;var L=I[i];if((L instanceof sap.m.GroupHeaderListItem)){continue}var o=L.getBindingContext(this.sModelName);for(var j=0;f&&j<this.aKeyValues.length;j++){f=this.aKeyValues[j]==o.getProperty(this.aMasterKeys[j])}if(f){if(this.bIsPhone){L.setSelected(true);l.setSelectedItem(L,true)}break}}if(!f){var L=I[0]}if(!this.bIsPhone){l.fireSelect({listItem:L})}return},defineDetailHeaderFooter:function(c){this.oDHFHelper.defineDetailHeaderFooter(c)},defineFullscreenHeaderFooter:function(c){this.oFHFHelper.defineHeaderFooter(c)},setSplitContainer:function(s){this.oSplitContainer=s},registerExitModule:function(e){if(!this.aExitModules){this.aExitModules=[];var c=this.getComponent();if(c.exit){var a=jQuery.proxy(c.exit,c)}else{var a=function(){}}c.exit=jQuery.proxy(function(){for(var i=0;i<this.aExitModules.length;i++){this.aExitModules[i]()}a()},this)}this.aExitModules.push(e)},setMasterListBinding:function(c,b){if(c._oMasterListBinding){c._oMasterListBinding.detachChange(c._onMasterListLoaded,c);c._oMasterListBinding.detachChange(c._onMasterListChanged,c)}c._oMasterListBinding=b;if(c._oMasterListBinding){c._oMasterListBinding.attachChange(c._onMasterListLoaded,c);c._oMasterListBinding.attachChange(c._onMasterListChanged,c)}}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.app.Application')){jQuery.sap.declare("sap.ca.scfld.md.app.Application");jQuery.sap.require('sap.ui.app.Application');jQuery.sap.require('sap.m.MessageToast');sap.ui.base.ManagedObject.extend("sap.ca.scfld.md.app.Application",{metadata:{properties:{identity:"string",oViewHook:"string",component:"object"}},constructor:function(i,s){sap.ui.base.ManagedObject.apply(this,arguments);sap.ui.getCore().attachInit(jQuery.proxy(function(){this.main()},this))},init:function(){var d=new sap.ui.model.json.JSONModel({isTouch:sap.ui.Device.support.touch,isNoTouch:!sap.ui.Device.support.touch,isPhone:jQuery.device.is.phone,isNoPhone:!jQuery.device.is.phone,listMode:(jQuery.device.is.phone)?"None":"SingleSelectMaster",listItemType:(jQuery.device.is.phone)?"Active":"Inactive"});d.setDefaultBindingMode(sap.ui.model.BindingMode.OneWay);sap.ui.getCore().setModel(d,"device")},main:function(){var a=new sap.ca.scfld.md.app.ApplicationImplementation({identity:this.getIdentity(),oViewHook:this.getOViewHook(),component:this.getComponent()});sap.ca.scfld.md.app.Application.getImpl=jQuery.sap.getter(a);var A=new sap.ca.scfld.md.ApplicationFacade(a);jQuery.sap.require(this.getIdentity()+".Configuration");var c=jQuery.sap.getObject(this.getIdentity()+".Configuration");var C=new c();C._setApplicationFacade(A);if(a.isMock()){var m="Running in demo mode with mock data";sap.m.MessageToast.show(m,{duration:1000})}a.startApplication(C)}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.controller.BaseFullscreenController')){jQuery.sap.declare('sap.ca.scfld.md.controller.BaseFullscreenController');jQuery.sap.require('sap.ui.core.mvc.Controller');sap.ui.core.mvc.Controller.extend("sap.ca.scfld.md.controller.BaseFullscreenController",{constructor:function(){this.oApplicationImplementation=sap.ca.scfld.md.app.Application.getImpl();var m=jQuery.proxy(function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oApplicationFacade=this.oApplicationImplementation.oConfiguration.oApplicationFacade;this.oConnectionManager=this.oApplicationImplementation.getConnectionManager();this.oApplicationImplementation.setModels(this);this.oApplicationImplementation.defineFullscreenHeaderFooter(this);var M=jQuery.proxy(function(e){},this);if(typeof this.onBeforeShow==="function"){var A=jQuery.proxy(this.onBeforeShow,this);this.onBeforeShow=function(e){A(e);M(e)}}else{this.getView().addEventDelegate({onBeforeShow:jQuery.proxy(function(e){M()},this)})}},this);var a=jQuery.proxy(this.onInit,this);this.onInit=function(){m();a()}},onInit:function(){},getHeaderFooterOptions:function(){return null},setHeaderFooterOptions:function(o){if(!this._oFullScreenHeaderFooterHelper){this._oFullScreenHeaderFooterHelper=new sap.ca.scfld.md.app.FullScreenHeaderFooterHelper(this.oApplicationImplementation)}this._oFullScreenHeaderFooterHelper.setHeaderFooter(this,o)},setBtnEnabled:function(i,e){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnEnabled(i,e)}},setBtnText:function(i,t){if(this._oControlStore.oButtonListHelper){this._oControlStore.oButtonListHelper.setBtnText(i,t)}},_refresh:function(c,e,d){if(d&&d.context){this.getView().setBindingContext(d.context)}},_navBack:function(){window.history.back()},isMainScreen:function(){return true}})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.ConfigurationBase')){jQuery.sap.declare("sap.ca.scfld.md.ConfigurationBase");sap.ui.base.ManagedObject.extend("sap.ca.scfld.md.ConfigurationBase",{metadata:{properties:{"identifier":"string"},publicMethods:["setApplicationFacade"]},_setApplicationFacade:function(a){this.oApplicationFacade=a;this.setApplicationFacade(a)},setApplicationFacade:function(a){},isMock:function(){var r=jQuery.sap.getUriParameters().get("responderOn");return("true"===r)},getMasterKeyAttributes:function(){return null},getServiceList:function(){return null},getExcludedQueryStringParameters:function(){return null},})};if(!jQuery.sap.isDeclared('sap.ca.scfld.md.ComponentBase')){jQuery.sap.declare("sap.ca.scfld.md.ComponentBase");jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.ui.core.routing.Router');jQuery.sap.require('sap.ui.core.routing.History');jQuery.sap.require('sap.m.routing.RouteMatchedHandler');sap.ui.core.UIComponent.extend("sap.ca.scfld.md.ComponentBase",{constructor:function(I,s){this._aQueue=[];var a;var b=jQuery.proxy(function(){sap.ui.core.UIComponent.prototype.init.apply(this,arguments);this._routeMatchedHandler=new sap.m.routing.RouteMatchedHandler(this.getRouter())},this);a=jQuery.proxy(this.init,this);this.init=function(){b();a();this.getRouter().initialize()};this._aExitModules=[];var B=jQuery.proxy(function(){for(var i=0;i<this._aExitModules.length;i++){this._aExitModules[i]()}},this);if(this.exit){var A=jQuery.proxy(this.exit,this)}else{var A=function(){}}this.exit=function(){A();B()};sap.ui.core.UIComponent.prototype.constructor.apply(this,arguments)},init:function(){},_registerExitModule:function(e){this._aExitModules.push(e)}});sap.ca.scfld.md.ComponentBase.createMetaData=function(a,A){var s=function(D,r){for(var R in r){if(!r[R].targetControl&&D.targetControl){r[R].targetControl=D.targetControl}if(!r[R].targetAggregation&&D.targetAggregation){r[R].targetAggregation=D.targetAggregation}if(!r[R].viewPath&&D.viewPath){r[R].viewPath=D.viewPath}if(!r[R].viewLevel&&D.viewLevel){r[R].viewLevel=D.viewLevel}}return r};var m={};for(var p in A){if(p!=="viewPath"&&p!=="masterPageRoutes"&&p!=="detailPageRoutes"&&p!=="fullScreenPageRoutes"){m[p]=A[p]}}if(a==="MD"){m.routing={"config":{"viewType":"XML","viewPath":A.viewPath,"targetAggregation":"detailPages","viewLevel":undefined,"clearTarget":false},"routes":{"masterDetail":{"view":"MainSplitContainer","name":"masterDetail","viewPath":"sap.ca.scfld.md.view","targetControl":"fioriContent","targetAggregation":"pages","pattern":"_neverusethispattern_","subroutes":{"master":{"pattern":"","view":"S2","targetControl":"MainSplitContainer","targetAggregation":"masterPages","viewLevel":0,"subroutes":{"detail":{"pattern":"detail/{contextPath}","view":"S3","viewLevel":1},"noData":{"pattern":"noData/{viewTitle}/{languageKey}","viewPath":"sap.ca.scfld.md.view","view":"empty","viewLevel":1}}},}},"fullScreen":{"view":"App","viewPath":"sap.ca.scfld.md.view","targetControl":"fioriContent","targetAggregation":"pages","pattern":"_neverusethispattern_","subroutes":{}}}}}else{m.routing={"config":{"viewType":"XML","viewPath":A.viewPath,"targetAggregation":"pages","viewLevel":undefined,"clearTarget":false},"routes":{"fullScreen":{"view":"App","viewPath":"sap.ca.scfld.md.view","targetControl":"fioriContent","targetAggregation":"pages","subroutes":{"noData":{"pattern":"noData/{viewTitle}/{languageKey}","viewPath":"sap.ca.scfld.md.view","view":"empty","viewLevel":2}}}}}}var d;var M;var f;try{d=m.routing.routes.masterDetail.subroutes.master.subroutes}catch(e){}try{M=m.routing.routes.masterDetail.subroutes}catch(e){}try{f=m.routing.routes.fullScreen.subroutes}catch(e){}if(d){jQuery.extend(true,d,A.detailPageRoutes)}if(M){jQuery.extend(true,M,A.masterPageRoutes)}if(f){jQuery.extend(true,f,A.fullScreenPageRoutes)}s({targetControl:"MainSplitContainer",targetAggregation:"masterPages",viewPath:A.viewPath,viewLevel:0},M);s({targetAggregation:"detailPages",viewPath:A.viewPath,viewLevel:1},d);s({targetControl:"app",targetAggregation:"pages",viewPath:A.viewPath,viewLevel:2},f);return m}};
